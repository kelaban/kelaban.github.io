(this["webpackJsonpcrossword-maker"]=this["webpackJsonpcrossword-maker"]||[]).push([[0],{68:function(e,t,n){e.exports=n(82)},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),o=n.n(c),i=(n(73),n(6)),l=n(2),u=n(14),s=n(12),d=n(3),m=(n(74),n(75),"ACROSS"),f="DOWN",h=function(e){return e===m},g=function(e){return"."===e};function p(e){var t=e.grid,n=e.selected,r=e.currentWord,c=e.hideAnswers,o=e.onClick,i=t.size,l=i.rows,u=i.cols,d=Object(s.a)(Array(l*u).keys()).map((function(e){var i=Math.floor(e/u),l=Math.floor(e%u),s=t.grid[e],d=["Grid-item"];n&&n.row===i&&n.column===l?d.push("Grid-item-selected"):g(s)?d.push("Grid-item-blocked"):r&&r.coordinates.some((function(e){return e[0]===i&&e[1]===l}))&&d.push("Grid-item-highlight");var m=d.join(" "),f={fontSize:"".concat(1/s.length*1.1,"em")};return a.a.createElement("div",{key:e,className:m,onClick:function(){return o({row:i,column:l})}},a.a.createElement("span",{className:"Grid-number"},t.gridnums[e]>0?t.gridnums[e]:""),a.a.createElement("span",{style:f},c?" ":s))}));return a.a.createElement("div",{style:{gridTemplateColumns:"repeat(".concat(u,", 1fr)"),gridTemplateRows:"repeat(".concat(l,", 1fr)")},className:"Grid-container"},d)}var w=n(120),v=n(135),b=n(138),O=n(127),E=n(124),j=n(125),y=n(123),C=n(122),k=n(54),S=n.n(k),z=Object(w.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function W(e){var t=e.onSave,n=z(),r=a.a.useState(!1),c=Object(u.a)(r,2),o=c[0],l=c[1],s=a.a.useState({rows:15,cols:15}),d=Object(u.a)(s,2),m=d[0],f=d[1],h=function(e){return function(){l(!1),e&&t(m)}},g=function(e){return function(t){f(Object.assign({},m,Object(i.a)({},e,+t.target.value||"")))}};return a.a.createElement("div",null,a.a.createElement(C.a,{"aria-label":"New puzzle",color:"inherit",startIcon:a.a.createElement(S.a,null),onClick:function(){l(!0)}},"New Puzzle"),a.a.createElement(b.a,{open:o,onClose:h(!1)},a.a.createElement(y.a,null,"Create New Puzzle"),a.a.createElement(E.a,null,a.a.createElement(j.a,null,"Create a new puzzle. Warning! This will destroy the current puzzle. Make sure to save first!"),a.a.createElement(v.a,{label:"Rows",value:m.rows,onChange:g("rows"),className:n.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}}),a.a.createElement(v.a,{label:"Columns",value:m.cols,onChange:g("cols"),className:n.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}})),a.a.createElement(O.a,null,a.a.createElement(C.a,{onClick:h(!1),color:"primary"},"Cancel"),a.a.createElement(C.a,{onClick:h(!0),color:"primary"},"Create"))))}var T,x=n(33),N=function(e,t,n){return e.size.cols*t+n},P=function(e,t,n){return e.grid[N(e,t,n)]},R=n(44),L=n.n(R),D=function e(t){var n=this;Object(x.a)(this,e),this.right=function(){n.setSelected({row:n.selected.row,column:Math.min(n.width-1,n.selected.column+1)})},this.left=function(){n.setSelected({row:n.selected.row,column:Math.max(0,n.selected.column-1)})},this.up=function(){n.setSelected({row:Math.max(0,n.selected.row-1),column:n.selected.column})},this.down=function(){n.setSelected({row:Math.min(n.height-1,n.selected.row+1),column:n.selected.column})},this.moveForward=function(){h(n.currentWord.direction)?n.right():n.down()},this.moveBack=function(){h(n.currentWord.direction)?n.left():n.up()};var r=t.selected,a=t.width,c=t.height,o=t.currentWord,i=t.setSelected;this.width=a,this.height=c,this.selected=r,this.setSelected=i,this.currentWord=o},M=function e(t){var n=this;Object(x.a)(this,e),this.setRotationalSymettry=function(e){n.grid.grid[N(n.grid,n.rows-n.selected.row-1,n.cols-n.selected.column-1)]=e},this.handleBackspace=function(e){var t=n.grid,r=n.selected,a=(n.rows,n.cols,n.movement),c=n.updateGrid,o=P(t,r.row,r.column);g(o)&&n.setRotationalSymettry(""),t.grid[N(t,r.row,r.column)]="",a.moveBack(),c(t)},this.handleLetter=function(e){var t=e.key.toUpperCase(),r=n.grid,a=n.selected,c=(n.rows,n.cols,n.movement),o=n.updateGrid;if("."===e.key)r.grid[N(r,a.row,a.column)]=t,n.setRotationalSymettry(t),c.moveForward(),o(r);else if(e.ctrlKey)r.grid[N(r,a.row,a.column)]+=t,o(r);else{var i=P(r,a.row,a.column);g(i)&&n.setRotationalSymettry(""),r.grid[N(r,a.row,a.column)]=t,c.moveForward(),o(r)}},this.handleSpace=function(e){var t=n.setCurrentWord,r=n.currentWord;t(Object.assign({},r,{direction:h(r.direction)?f:m}))},this.handleLeft=function(){n.movement.left()},this.handleRight=function(){n.movement.right()},this.handleUp=function(){n.movement.up()},this.handleDown=function(){n.movement.down()},this.selected=t.selected,this.setSelected=t.setSelected,this.currentWord=t.currentWord,this.setCurrentWord=t.setCurrentWord,this.grid=t.grid,this.updateGrid=t.updateGrid,this.rows=t.grid.size.rows,this.cols=t.grid.size.cols,this.movement=new D({width:t.grid.size.cols,height:t.grid.size.rows,setSelected:t.setSelected,currentWord:t.currentWord,selected:t.selected})},A="MOVE_UP",G="MOVE_LEFT",F="MOVE_RIGHT",B="MOVE_DOWN",I="ENTER_LETTER",_="BACKSPACE",J="SPACE",V=(T={},Object(i.a)(T,A,"up"),Object(i.a)(T,B,"down"),Object(i.a)(T,G,"left"),Object(i.a)(T,F,"right"),Object(i.a)(T,I,"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.".split("")),Object(i.a)(T,_,["del","backspace"]),Object(i.a)(T,J,"space"),T),U=Object(w.a)((function(e){return{noOutline:{"&:focus":{outline:0}}}}));function Y(e){var t,n=U(),c=Object(r.useState)(!1),o=Object(u.a)(c,2),l=o[0],s=o[1],d=new M(e),m=(t={},Object(i.a)(t,A,d.handleUp),Object(i.a)(t,B,d.handleDown),Object(i.a)(t,G,d.handleLeft),Object(i.a)(t,F,d.handleRight),Object(i.a)(t,I,d.handleLetter),Object(i.a)(t,_,d.handleBackspace),Object(i.a)(t,J,d.handleSpace),t),f=function(e){return function(t){s(e)}};return Object(r.useEffect)((function(){return Object.keys(V).forEach((function(e){var t;L.a.bind(V[e],(t=m[e],function(e){return l&&t(e)}))})),function(){Object.keys(V).forEach((function(e){L.a.unbind(V[e])}))}})),a.a.createElement("div",{className:n.noOutline,onFocus:f(!0),onBlur:f(!1),tabIndex:"-1"},e.children)}var H=n(128),K=n(58);function X(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}var $=Object(r.memo)((function(e){var t=e.grid,n=e.onClueFocus,r=e.onClueChanged,c=function(e,t){return function(r){n(e,t)}},o=function(e,t){return function(n){r(e,t,n.target.value)}},i=function(e){var n=e.toLowerCase();return t.clues[n].map((function(r,i){var l=t.answers[n][i],u=+r.match(/^ *[0-9]+/)[0].trim(),s=X(r.replace(/^ *[0-9]*\. */,"")),d=l.match("_"),m=!d&&!s.length;return a.a.createElement(v.a,{key:"".concat(u,"-").concat(l),label:"".concat(u,": ").concat(l),defaultValue:s,type:"text",margin:"dense",variant:"outlined",fullWidth:!0,onClick:c(e,u),onBlur:o(e,l),disabled:d,error:m})}))},l=i(m),u=i(f);return a.a.createElement("div",null,a.a.createElement(H.a,{container:!0,spacing:1},a.a.createElement(H.a,{item:!0,xs:!0},a.a.createElement(K.a,null,"Across"),l),a.a.createElement(H.a,{item:!0,xs:!0},a.a.createElement(K.a,null,"Down"),u)))}));function q(e){var t=e.grid,n={margin:0,listStyleType:"none"},r=function(e){var t=+e.match(/^ *[0-9]+/)[0].trim(),r=X(e.replace(/^ *[0-9]*\. */,""));return a.a.createElement("li",{style:n,key:e},a.a.createElement("b",{style:{marginRight:2}},t),r)};return a.a.createElement("div",{style:{overflow:"hidden",marginTop:40,marginRight:20,marginLeft:20,height:"calc(100vh - 40px)"}},a.a.createElement("div",{style:{float:"right",width:"50vmin",height:"50vmin"}},a.a.createElement(p,{grid:t,hideAnswers:!0})),a.a.createElement("ul",{style:{width:"calc(50vw - 40px)",columnCount:2,margin:0,padding:0}},a.a.createElement("li",{style:n},a.a.createElement("b",null,"ACROSS")),t.clues.across.map(r),a.a.createElement("li",{style:n},a.a.createElement("b",null,"DOWN")),t.clues.down.map(r)))}var Q=n(55),Z=n(15),ee=n(130),te=n(84),ne=n(134),re=n(136),ae=n(131),ce=n(126),oe=n(129),ie=n(132),le=n(133),ue=n(56),se=n.n(ue),de=n(57),me=n.n(de);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=Object(w.a)((function(e){return{root:{display:"flex"},title:{flexGrow:1},container:{paddingLeft:12,paddingRight:12,paddingTop:32},paper:{padding:10},scroll:{overflow:"scroll",maxHeight:"calc(100vh - 180px)"}}})),pe=null,we=Object(r.memo)((function(e){var t=e.currentWord,n=e.onClick,c=Object(r.useState)(pe||[]),o=Object(u.a)(c,2),i=o[0],l=o[1],s=Object(r.useState)([]),d=Object(u.a)(s,2),m=d[0],f=d[1];Object(r.useEffect)((function(){fetch("".concat("/xwordmaker","/wordlist/wordlist.txt")).then((function(e){return e.text()})).then((function(e){return e.split("\n").filter((function(e){return!e.startsWith("#")}))})).then((function(e){return function(e){pe=e,l(e)}(e)}))}),[]),Object(r.useEffect)((function(){var e=new RegExp("^"+t.word+"$","i");f(i.filter((function(t){return t.match(e)})))}),[i,t.word]);return a.a.createElement("div",null,"Words: ",m.length>100?"showing ".concat(100,"/"):"",m.length,a.a.createElement(ce.a,{dense:!0},m.slice(0,100).map((function(e){return a.a.createElement(oe.a,{button:!0,onClick:function(){return n(e)},key:e},e)}))))}));function ve(e){var t=e.children,n=e.value,r=e.index;Object(l.a)(e,["children","value","index"]);return n!==r?a.a.createElement("div",null):a.a.createElement("div",null,t)}function be(e,t){for(var n=e.size,r=n.rows,a=n.cols,c={gridnums:e.grid.map((function(e){return 0})),answers:{down:[],across:[]},clues:{down:[],across:[]}},o=1,i=0;i<r;++i)for(var l=0;l<a;++l)if(!g(P(e,i,l))){var u=(0===i||g(P(e,i-1,l)))&&!(i===r||g(P(e,i+1,l))),s=(0===l||g(P(e,i,l-1)))&&!(l===a||g(P(e,i,l+1)));if((s||u)&&(c.gridnums[N(e,i,l)]=o++),s){for(var d="",m=l;!g(P(e,i,m))&&m<a;){var f=P(e,i,m);d+=f||"_",m++}c.answers.across.push(d);var h=t[d]||"";c.clues.across.push("".concat(o-1,". ").concat(h))}if(u){for(var p="",w=i;!g(P(e,w,l))&&w<r;){var v=P(e,w,l);p+=v||"_",w++}c.answers.down.push(p);var b=t[p]||"";c.clues.down.push("".concat(o-1,". ").concat(b))}}return c}var Oe=function(e){var t={title:"TODO: NY Times, Thu, Sep 11, 2008",author:"TODO: Caleb Madison",editor:"TODO: Will Shortz",copyright:"TODO: 2008, The New York Times",publisher:"TODO: The New York Times",date:"TODO: 9/11/2008",size:e,clues:{across:[],down:[]}};return Object.assign(t,{grid:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return""})),gridnums:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0})),circles:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0}))})};function Ee(e){var t={};if(e.answers){var n=function(n){e.answers[n].filter((function(e){return!e.match("_")})).reduce((function(t,r,a){var c=(e.clues[n][a]||"").replace(/^ *[0-9]*\. */,"");return t[r]=c,t}),t)};n("down"),n("across")}return t}var je=function(){var e=JSON.parse(localStorage.getItem("grid"))||Oe({rows:15,cols:15});return{grid:e,wordToClue:Ee(e)}}(),ye={word:"",direction:m,coordinates:[]};function Ce(e){var t=e.children,n=Object(r.useState)("100%"),c=Object(u.a)(n,2),o=c[0],i=c[1],l=a.a.createRef(),s=function(){l.current&&i(l.current.clientWidth)};return Object(r.useEffect)((function(){return window.addEventListener("resize",s),s(),function(){window.removeEventListener("resize",s)}}),[]),a.a.createElement("div",{ref:l,style:{width:o,height:o}},t)}var ke=function(){var e=ge(),t=Object(Z.a)(),n=Object(r.useState)(!1),c=Object(u.a)(n,2),o=c[0],l=c[1],w=Object(r.useState)(0),v=Object(u.a)(w,2),b=v[0],O=v[1],E=Object(r.useState)({selected:null,currentWord:ye}),j=Object(u.a)(E,2),y=j[0],k=j[1],S=Object(r.useState)(je),z=Object(u.a)(S,2),T=z[0],x=z[1],R=T.wordToClue,L=T.grid,D=y.selected,M=y.currentWord,A=function(e,t){t=t||{},x((function(n){var r=he({},n,{},t,{grid:e});return r.grid=he({},r.grid,{},be(r.grid,r.wordToClue)),r}))},G=Object(r.useCallback)((function(e){k((function(t){return he({},t,{currentWord:he({},t.currentWord,{},e)})}))}),[]);Object(r.useEffect)((function(){localStorage.setItem("grid",JSON.stringify(L))}),[L,R]),Object(r.useEffect)((function(){var e=function(e){var t=e.direction,n=e.grid,r=e.selected;if(!r)return null;for(var a=function(e){return h(t)?P(n,r.row,e):P(n,e,r.column)},c=function(e){return h(t)?e<n.size.cols:e<n.size.rows},o=h(t)?r.column:r.row,i=o;o>0&&!g(a(o));)o--;for(;c(i)&&!g(a(i));)i++;g(a(o))&&o++;for(var l,u="",s=[],d=o;d<i;++d){var m=a(d);""===m&&(m="."),u+=m,s.push((l=d,h(t)?[r.row,l]:[l,r.column]))}return{word:u,coordinates:s}}({selected:D,direction:M.direction,grid:L});e&&G(e)}),[G,D,L,M.direction]);var F=function(e){var t=y.currentWord;e&&D&&e.row===D.row&&e.column===D.column&&(t=he({},t,{direction:M.direction===m?f:m})),k(he({},y,{selected:e,currentWord:t}))},B=Object(r.useCallback)((function(e,t){for(var n={},r=0;r<L.gridnums.length;++r)if(L.gridnums[r]==t){var a=Math.floor(r/L.size.cols),c=Math.floor(r%L.size.cols);n={row:a,column:c};break}k((function(t){return he({},t,{currentWord:he({},ye,{direction:e}),selected:n})}))}),[L]),I=Object(r.useCallback)((function(e,t,n){!function(e,t){x((function(n){var r=he({},n,{wordToClue:he({},n.wordToClue,Object(i.a)({},e,t))});return r.grid=he({},r.grid,{},be(r.grid,r.wordToClue)),r}))}(t,n)}),[]),_=Object(r.useCallback)((function(e){M.coordinates.forEach((function(t,n){L.grid[N(L,t[0],t[1])]=e[n]})),A(L)}),[L,M]),J=Object(d.a)(e.paper),V=Object(d.a)(e.paper,e.scroll),U={selected:D,setSelected:F,setCurrentWord:G,currentWord:M,grid:L,updateGrid:A};Object(r.useEffect)((function(){window.matchMedia("print").addListener((function(e){return l(e.matches)})),window.onbeforeprint=function(){return l(!0)},window.onafterprint=function(){return l(!1)}}),[]);var X=Object(ee.a)(t.breakpoints.up("lg"));if(o)return a.a.createElement(q,{grid:L});var ce=[{label:"Word List",children:a.a.createElement(te.a,{className:V},a.a.createElement(we,{onClick:_,currentWord:M}))},{label:"Clues",children:a.a.createElement(te.a,{className:V},a.a.createElement($,{grid:L,onClueFocus:B,onClueChanged:I}))}],oe=null,ue=a.a.createElement(Y,U,a.a.createElement(te.a,{className:J},a.a.createElement(Ce,null,a.a.createElement(p,{grid:L,selected:y.selected,currentWord:y.currentWord,onClick:F}))));X?oe=ue:ce=[{label:"Grid",children:ue}].concat(Object(s.a)(ce));var de=a.a.createElement(a.a.Fragment,null,a.a.createElement(re.a,{value:b,onChange:function(e,t){return O(t)}},ce.map((function(e){return a.a.createElement(ae.a,{key:e.label,label:e.label})}))),ce.map((function(e,t){return a.a.createElement(ve,{key:e.label,value:b,index:t},e.children)})));return a.a.createElement("div",{className:"App"},a.a.createElement(ie.a,{position:"static"},a.a.createElement(le.a,null,a.a.createElement(K.a,{variant:"h6",className:e.title},"XWordMaker"),a.a.createElement(C.a,{"aria-label":"Save puzzle",color:"inherit",startIcon:a.a.createElement(se.a,null),onClick:function(){var e=new Blob([JSON.stringify(L)],{type:"text/plain;charset=utf-8"});Object(Q.saveAs)(e,"puzzle.json")}},"Save Puzzle"),a.a.createElement(C.a,{"aria-label":"Load puzzle",color:"inherit",component:"label",startIcon:a.a.createElement(me.a,null)},"Load Puzzle",a.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){var t=e.target,n=new FileReader;n.onload=function(){var e=n.result,t=JSON.parse(e);A(t,{wordToClue:Ee(t)})},n.readAsText(t.files[0])}})),a.a.createElement(W,{onSave:function(e){A(Oe(e)),F()}}))),a.a.createElement(ne.a,{className:e.container},a.a.createElement(H.a,{container:!0,spacing:2},X&&a.a.createElement(H.a,{item:!0,lg:6},oe),a.a.createElement(H.a,{item:!0,lg:6},de))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[68,1,2]]]);
//# sourceMappingURL=main.0ce6396d.chunk.js.map