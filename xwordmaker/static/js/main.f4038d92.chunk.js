(this["webpackJsonpcrossword-maker"]=this["webpackJsonpcrossword-maker"]||[]).push([[0],{64:function(e,t,r){e.exports=r(79)},69:function(e,t,r){},70:function(e,t,r){e.exports=r.p+"static/media/logo.25bf045c.svg"},71:function(e,t,r){},72:function(e,t,r){},79:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(9),o=r.n(c),i=(r(69),r(6)),l=r(2),u=r(16),s=r(12),d=r(3),m=(r(70),r(71),r(72),"ACROSS"),f="DOWN",h=function(e){return e===m},g=".",p=function(e){return e===g};function w(e){var t=e.grid,r=e.selected,n=e.currentWord,c=e.onClick,o=t.size,i=o.rows,l=o.cols,u=Object(s.a)(Array(i*l).keys()).map((function(e){var o=Math.floor(e/l),i=Math.floor(e%l),u=t.grid[e],s=r&&r.row===o&&r.column===i,d=["Grid-item"];p(u)&&d.push("Grid-item-blocked"),s?d.push("Grid-item-selected"):n.coordinates.some((function(e){return e[0]===o&&e[1]===i}))&&d.push("Grid-item-highlight");var m=d.join(" "),f={fontSize:"".concat(1/u.length*1.1,"em")};return a.a.createElement("div",{key:e,className:m,onClick:function(){return c({row:o,column:i})}},a.a.createElement("span",{className:"Grid-number"},t.gridnums[e]>0?t.gridnums[e]:""),a.a.createElement("span",{style:f},u))}));return a.a.createElement("div",{style:{gridTemplateColumns:"repeat(".concat(l,", 1fr)")},className:"Grid-container"},u)}var v=r(118),b=r(133),O=r(136),E=r(126),y=r(123),j=r(124),k=r(122),S=r(120),z=r(43),W=r.n(z),C=Object(v.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function N(e){var t=e.onSave,r=C(),n=a.a.useState(!1),c=Object(u.a)(n,2),o=c[0],l=c[1],s=a.a.useState({rows:15,cols:15}),d=Object(u.a)(s,2),m=d[0],f=d[1],h=function(e){return function(){l(!1),e&&t(m)}},g=function(e){return function(t){f(Object.assign({},m,Object(i.a)({},e,+t.target.value)))}};return a.a.createElement("div",null,a.a.createElement(S.a,{"aria-label":"New puzzle",color:"inherit",startIcon:a.a.createElement(W.a,null),onClick:function(){l(!0)}},"New Puzzle"),a.a.createElement(O.a,{open:o,onClose:h(!1)},a.a.createElement(k.a,null,"Create New Puzzle"),a.a.createElement(y.a,null,a.a.createElement(j.a,null,"Create a new puzzle. Warning! This will destroy the current puzzle. Make sure to save first!"),a.a.createElement(b.a,{label:"Rows",value:m.rows,onChange:g("rows"),className:r.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined"}),a.a.createElement(b.a,{label:"Columns",value:m.cols,onChange:g("cols"),className:r.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined"})),a.a.createElement(E.a,null,a.a.createElement(S.a,{onClick:h(!1),color:"primary"},"Cancel"),a.a.createElement(S.a,{onClick:h(!0),color:"primary"},"Create"))))}var x=r(37),T=r(20),P=function(e,t,r){return e.size.cols*t+r},A=function(e,t,r){return e.grid[P(e,t,r)]},D=function(){function e(t){var r=t.selected,n=t.width,a=t.height,c=t.currentWord,o=t.setSelected;Object(x.a)(this,e),this.selected=r,this.width=n,this.height=a,this.setSelected=o,this.currentWord=c}return Object(T.a)(e,[{key:"right",value:function(){this.setSelected({row:this.selected.row,column:Math.min(this.width-1,this.selected.column+1)})}},{key:"left",value:function(){this.setSelected({row:this.selected.row,column:Math.max(0,this.selected.column-1)})}},{key:"up",value:function(){this.setSelected({row:Math.max(0,this.selected.row-1),column:this.selected.column})}},{key:"down",value:function(){this.setSelected({row:Math.min(this.height-1,this.selected.row+1),column:this.selected.column})}},{key:"moveForward",value:function(){h(this.currentWord.direction)?this.right():this.down()}},{key:"moveBack",value:function(){h(this.currentWord.direction)?this.left():this.up()}}]),e}();function F(e){var t=e.selected,r=e.setSelected,c=e.setCurrentWord,o=e.currentWord,i=e.grid,l=e.updateGrid,u=e.hasFocus,s=i.size,d=s.rows,h=s.cols,w=function(e){if(u&&t){var n=new D({width:h,height:d,setSelected:r,currentWord:o,selected:t});if("Backspace"===e.key){var a=A(i,t.row,t.column);p(a)&&(i.grid[P(i,d-t.row-1,h-t.column-1)]=""),i.grid[P(i,t.row,t.column)]="",n.moveBack(),l(i.grid)}else if(e.key.match(/^[a-z0-9]$/i)){var s=e.key.toUpperCase();e.ctrlKey?i.grid[P(i,t.row,t.column)]+=s:(i.grid[P(i,t.row,t.column)]=s,n.moveForward()),l(i.grid)}else e.key===g?(i.grid[P(i,t.row,t.column)]=e.key,i.grid[P(i,d-t.row-1,h-t.column-1)]=e.key,n.moveForward(),l(i.grid)):" "===e.key?c(Object.assign({},o,{direction:o.direction===m?f:m})):"ArrowRight"==e.key?n.right():"ArrowLeft"==e.key?n.left():"ArrowUp"==e.key?n.up():"ArrowDown"==e.key&&n.down()}};return Object(n.useEffect)((function(){return document.addEventListener("keydown",w),function(){document.removeEventListener("keydown",w)}})),a.a.createElement(a.a.Fragment,null)}var G=r(53),L=r(80),J=r(130),M=r(131),I=r(134),B=r(132),R=r(125),$=r(127),Y=r(128),U=r(129),H=r(56),K=r(54),X=r.n(K),Z=r(55),q=r.n(Z);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=Object(v.a)((function(e){return{root:{display:"flex"},title:{flexGrow:1},container:{paddingLeft:12,paddingRight:12,paddingTop:32},paper:{"&:focus":{outline:0},padding:10},gridPaper:{width:"75vmin",height:"75vmin",float:"left"},scroll:{overflow:"scroll",maxHeight:"calc(100vh - 180px)"}}})),ee=function(e){var t=e.grid,r=Object(s.a)(Array(26).keys()).map((function(e){return String.fromCharCode(e+65)})).reduce((function(e,t){return(e[t]=0)||e}),{}),n=t.grid.map((function(e){return e})).filter((function(e){return e&&e.match(/^[A-Z]$/)})).reduce((function(e,t){return(e[t]=(e[t]||0)+1)&&e}),r),c=function(e){for(var r={},n=0;n<=t.size.rows;++n){for(var a=0,c=0;c<=t.size.cols;++c){var o=e?A(t,c,n):A(t,n,c);p(o)?a+=1:(a>0&&(r[a]=(r[a]||0)+1),a=0)}a>0&&(r[a]=(r[a]||0)+1)}return r},o=c(),i=c(!0),l=Object.values(o).reduce((function(e,t){return e+t}),0)+Object.values(i).reduce((function(e,t){return e+t}),0);return a.a.createElement("div",null,JSON.stringify(n),a.a.createElement("br",null),"Across",a.a.createElement("br",null),JSON.stringify(o),a.a.createElement("br",null),"Down",a.a.createElement("br",null),JSON.stringify(i),a.a.createElement("br",null),"Total: ",l)},te=function(e){var t=e.currentWord,r=e.onClick,c=Object(n.useState)([]),o=Object(u.a)(c,2),i=o[0],l=o[1],s=Object(n.useState)([]),d=Object(u.a)(s,2),m=d[0],f=d[1];Object(n.useEffect)((function(){fetch("".concat("/xwordmaker","/wordlist/wordlist.txt")).then((function(e){return e.text()})).then((function(e){return e.split("\n").filter((function(e){return!e.startsWith("#")}))})).then((function(e){return l(e)}))}),[]),Object(n.useEffect)((function(){var e=new RegExp("^"+t.word+"$","i");f(i.filter((function(t){return t.match(e)})))}),[t.word]);return a.a.createElement("div",null,"Words: ",m.length>100?"showing ".concat(100,"/"):"",m.length,a.a.createElement(R.a,{dense:!0},m.slice(0,100).map((function(e){return a.a.createElement($.a,{button:!0,onClick:function(){return r(e)},key:e},e)}))))};function re(e){var t=e.children,r=e.value,n=e.index,c=(Object(l.a)(e,["children","value","index"]),{});return r!==n&&(c.display="none"),a.a.createElement("div",{style:c},t)}function ne(e){for(var t=e.size,r=t.rows,n=t.cols,a=e.grid.map((function(e){return 0})),c=1,o=0;o<r;++o)for(var i=0;i<n;++i)p(A(e,o,i))||(0===o||p(A(e,o-1,i))&&(o!==r||p(A(e,o+1,i)))||0===i||p(A(e,o,i-1))&&(i!==n||p(A(e,o,i+1))))&&(a[P(e,o,i)]=c++);return a}var ae=function(e){var t={title:"TODO: NY Times, Thu, Sep 11, 2008",author:"TODO: Caleb Madison",editor:"TODO: Will Shortz",copyright:"TODO: 2008, The New York Times",publisher:"TODO: The New York Times",date:"TODO: 9/11/2008",size:e,clues:{across:[],down:[]}};return Object.assign(t,{grid:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return""})),gridnums:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0})),circles:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0}))})};var ce=function(){var e=_(),t=Object(n.useState)(0),r=Object(u.a)(t,2),c=r[0],o=r[1],i=Object(n.useState)({selected:null,currentWord:{word:"",direction:m,coordinates:[]}}),l=Object(u.a)(i,2),g=l[0],v=l[1],b=Object(n.useState)(JSON.parse(localStorage.getItem("grid"))||ae({rows:15,cols:15})),O=Object(u.a)(b,2),E=O[0],y=O[1],j=Object(n.useState)(!1),k=Object(u.a)(j,2),z=k[0],W=k[1],C=g.selected,x=g.currentWord,T=function(e){v(V({},g,{currentWord:e}))},D=function(e){var t=Object.assign({},E,{grid:Object(s.a)(e)});localStorage.setItem("grid",JSON.stringify(t)),y(t)};Object(n.useEffect)((function(){return y(Object.assign({},E,{gridnums:ne(E)}))}),[E.grid]),Object(n.useEffect)((function(){T(function(e){var t=e.currentWord,r=e.grid,n=e.selected;if(!n)return t;for(var a=function(e){return h(t.direction)?A(r,n.row,e):A(r,e,n.column)},c=function(e){return h(t.direction)?e<r.size.cols:e<r.size.rows},o=h(t.direction)?n.column:n.row,i=o;o>0&&!p(a(o));)o--;for(;c(i)&&!p(a(i));)i++;p(a(o))&&o++;for(var l,u="",s=[],d=o;d<i;++d){var m=a(d);""===m&&(m="."),u+=m,s.push((l=d,h(t.direction)?[n.row,l]:[l,n.column]))}return Object.assign({},t,{word:u,coordinates:s})}({selected:C,currentWord:x,grid:E}))}),[C,x.direction]);var R=function(e){var t=g.currentWord;e&&C&&e.row===C.row&&e.column===C.column&&(t=V({},t,{direction:x.direction===m?f:m})),v(V({},g,{selected:e,currentWord:t}))},$=function(e){return function(t){W(e)}},K=Object(d.a)(e.paper,e.gridPaper),Z=Object(d.a)(e.paper,e.scroll),Q={selected:C,setSelected:R,setCurrentWord:T,currentWord:x,grid:E,updateGrid:D,hasFocus:z};return a.a.createElement("div",{className:"App"},a.a.createElement(Y.a,{position:"static"},a.a.createElement(U.a,null,a.a.createElement(H.a,{variant:"h6",className:e.title},"XWordMaker"),a.a.createElement(S.a,{"aria-label":"Save puzzle",color:"inherit",startIcon:a.a.createElement(X.a,null),onClick:function(){var e=new Blob([JSON.stringify(E)],{type:"text/plain;charset=utf-8"});Object(G.saveAs)(e,"puzzle.json")}},"Save Puzzle"),a.a.createElement(S.a,{"aria-label":"Load puzzle",color:"inherit",component:"label",startIcon:a.a.createElement(q.a,null)},"Load Puzzle",a.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){var t=e.target,r=new FileReader;r.onload=function(){var e=r.result;y(JSON.parse(e))},r.readAsText(t.files[0])}})),a.a.createElement(N,{onSave:function(e){y(ae(e)),R()}}))),a.a.createElement(F,Q),a.a.createElement(J.a,{className:e.container},a.a.createElement(M.a,{container:!0,spacing:0},a.a.createElement(M.a,{item:!0,xs:!0},a.a.createElement(L.a,{className:K,onFocus:$(!0),onBlur:$(!1),tabindex:"0"},a.a.createElement(w,{grid:E,selected:g.selected,currentWord:g.currentWord,onClick:R}))),a.a.createElement(M.a,{item:!0,xs:6},a.a.createElement(I.a,{value:c,onChange:function(e,t){return o(t)}},a.a.createElement(B.a,{label:"Word List"}),a.a.createElement(B.a,{label:"Grid Stats"})),a.a.createElement(re,{value:c,index:0},a.a.createElement(L.a,{className:Z},a.a.createElement(te,{onClick:function(e){x.coordinates.forEach((function(t,r){E.grid[P(E,t[0],t[1])]=e[r]})),D(E.grid)},currentWord:x}))),a.a.createElement(re,{value:c,index:1},a.a.createElement(L.a,{className:Z},a.a.createElement(ee,{grid:E})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[64,1,2]]]);
//# sourceMappingURL=main.f4038d92.chunk.js.map