(this["webpackJsonpcrossword-maker"]=this["webpackJsonpcrossword-maker"]||[]).push([[0],{67:function(e,t,r){e.exports=r(81)},72:function(e,t,r){},73:function(e,t,r){},74:function(e,t,r){},81:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(9),o=r.n(c),i=(r(72),r(6)),l=r(2),u=r(16),s=r(12),d=r(3),m=(r(73),r(74),"ACROSS"),f="DOWN",h=function(e){return e===m},g=".",w=function(e){return e===g};function p(e){var t=e.grid,r=e.selected,n=e.currentWord,c=e.hideAnswers,o=e.onClick,i=t.size,l=i.rows,u=i.cols,d=Object(s.a)(Array(l*u).keys()).map((function(e){var i=Math.floor(e/u),l=Math.floor(e%u),s=t.grid[e],d=["Grid-item"];r&&r.row===i&&r.column===l?d.push("Grid-item-selected"):w(s)?d.push("Grid-item-blocked"):n&&n.coordinates.some((function(e){return e[0]===i&&e[1]===l}))&&d.push("Grid-item-highlight");var m=d.join(" "),f={fontSize:"".concat(1/s.length*1.1,"em")};return a.a.createElement("div",{key:e,className:m,onClick:function(){return o({row:i,column:l})}},a.a.createElement("span",{className:"Grid-number"},t.gridnums[e]>0?t.gridnums[e]:""),a.a.createElement("span",{style:f},c?" ":s))}));return a.a.createElement("div",{style:{gridTemplateColumns:"repeat(".concat(u,", 1fr)"),gridTemplateRows:"repeat(".concat(l,", 1fr)")},className:"Grid-container"},d)}var v=r(119),b=r(134),O=r(137),E=r(126),y=r(123),k=r(124),j=r(122),C=r(121),S=r(52),z=r.n(S),W=Object(v.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function x(e){var t=e.onSave,r=W(),n=a.a.useState(!1),c=Object(u.a)(n,2),o=c[0],l=c[1],s=a.a.useState({rows:15,cols:15}),d=Object(u.a)(s,2),m=d[0],f=d[1],h=function(e){return function(){l(!1),e&&t(m)}},g=function(e){return function(t){f(Object.assign({},m,Object(i.a)({},e,+t.target.value||"")))}};return a.a.createElement("div",null,a.a.createElement(C.a,{"aria-label":"New puzzle",color:"inherit",startIcon:a.a.createElement(z.a,null),onClick:function(){l(!0)}},"New Puzzle"),a.a.createElement(O.a,{open:o,onClose:h(!1)},a.a.createElement(j.a,null,"Create New Puzzle"),a.a.createElement(y.a,null,a.a.createElement(k.a,null,"Create a new puzzle. Warning! This will destroy the current puzzle. Make sure to save first!"),a.a.createElement(b.a,{label:"Rows",value:m.rows,onChange:g("rows"),className:r.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}}),a.a.createElement(b.a,{label:"Columns",value:m.cols,onChange:g("cols"),className:r.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}})),a.a.createElement(E.a,null,a.a.createElement(C.a,{onClick:h(!1),color:"primary"},"Cancel"),a.a.createElement(C.a,{onClick:h(!0),color:"primary"},"Create"))))}var T=r(37),N=r(20),P=function(e,t,r){return e.size.cols*t+r},A=function(e,t,r){return e.grid[P(e,t,r)]},D=function(){function e(t){var r=t.selected,n=t.width,a=t.height,c=t.currentWord,o=t.setSelected;Object(T.a)(this,e),this.selected=r,this.width=n,this.height=a,this.setSelected=o,this.currentWord=c}return Object(N.a)(e,[{key:"right",value:function(){this.setSelected({row:this.selected.row,column:Math.min(this.width-1,this.selected.column+1)})}},{key:"left",value:function(){this.setSelected({row:this.selected.row,column:Math.max(0,this.selected.column-1)})}},{key:"up",value:function(){this.setSelected({row:Math.max(0,this.selected.row-1),column:this.selected.column})}},{key:"down",value:function(){this.setSelected({row:Math.min(this.height-1,this.selected.row+1),column:this.selected.column})}},{key:"moveForward",value:function(){h(this.currentWord.direction)?this.right():this.down()}},{key:"moveBack",value:function(){h(this.currentWord.direction)?this.left():this.up()}}]),e}();function F(e){var t=e.selected,r=e.setSelected,c=e.setCurrentWord,o=e.currentWord,i=e.grid,l=e.updateGrid,u=e.hasFocus,s=i.size,d=s.rows,h=s.cols,p=function(e){if(u&&t){var n=new D({width:h,height:d,setSelected:r,currentWord:o,selected:t});if("Backspace"===e.key){var a=A(i,t.row,t.column);w(a)&&(i.grid[P(i,d-t.row-1,h-t.column-1)]=""),i.grid[P(i,t.row,t.column)]="",n.moveBack(),l(i)}else if(e.key.match(/^[a-z0-9]$/i)){var s=e.key.toUpperCase();e.ctrlKey?i.grid[P(i,t.row,t.column)]+=s:(i.grid[P(i,t.row,t.column)]=s,n.moveForward()),l(i)}else e.key===g?(i.grid[P(i,t.row,t.column)]=e.key,i.grid[P(i,d-t.row-1,h-t.column-1)]=e.key,n.moveForward(),l(i)):" "===e.key?c(Object.assign({},o,{direction:o.direction===m?f:m})):"ArrowRight"==e.key?n.right():"ArrowLeft"==e.key?n.left():"ArrowUp"==e.key?n.up():"ArrowDown"==e.key&&n.down()}};return Object(n.useEffect)((function(){return document.addEventListener("keydown",p),function(){document.removeEventListener("keydown",p)}})),a.a.createElement(a.a.Fragment,null)}var L=r(127),M=r(56);function R(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}var G=Object(n.memo)((function(e){var t=e.grid,r=e.onClueFocus,n=e.onClueChanged,c=function(e,t){return function(n){r(e,t)}},o=function(e,t){return function(r){n(e,t,r.target.value)}},i=function(e){var r=e.toLowerCase();return t.clues[r].map((function(n,i){var l=t.answers[r][i],u=+n.match(/^ *[0-9]+/)[0].trim(),s=R(n.replace(/^ *[0-9]*\. */,"")),d=l.match("_"),m=!d&&!s.length;return a.a.createElement(b.a,{key:"".concat(u,"-").concat(l),label:"".concat(u,": ").concat(l),defaultValue:s,type:"text",margin:"dense",variant:"outlined",fullWidth:!0,onClick:c(e,u),onBlur:o(e,l),disabled:d,error:m})}))},l=i(m),u=i(f);return a.a.createElement("div",null,a.a.createElement(L.a,{container:!0,spacing:1},a.a.createElement(L.a,{item:!0,xs:!0},a.a.createElement(M.a,null,"Across"),l),a.a.createElement(L.a,{item:!0,xs:!0},a.a.createElement(M.a,null,"Down"),u)))}));function B(e){var t=e.grid,r={margin:0,listStyleType:"none"},n=function(e){var t=+e.match(/^ *[0-9]+/)[0].trim(),n=R(e.replace(/^ *[0-9]*\. */,""));return a.a.createElement("li",{style:r,key:e},a.a.createElement("b",{style:{marginRight:2}},t),n)};return a.a.createElement("div",{style:{overflow:"hidden",marginTop:40,marginRight:20,marginLeft:20,height:"calc(100vh - 40px)"}},a.a.createElement("div",{style:{float:"right",width:"50vmin",height:"50vmin"}},a.a.createElement(p,{grid:t,hideAnswers:!0})),a.a.createElement("ul",{style:{width:"calc(50vw - 40px)",columnCount:2,margin:0,padding:0}},a.a.createElement("li",{style:r},a.a.createElement("b",null,"ACROSS")),t.clues.across.map(n),a.a.createElement("li",{style:r},a.a.createElement("b",null,"DOWN")),t.clues.down.map(n)))}var I=r(53),J=r(14),_=r(129),Y=r(83),$=r(133),U=r(135),H=r(130),K=r(125),V=r(128),X=r(131),q=r(132),Q=r(54),Z=r.n(Q),ee=r(55),te=r.n(ee);function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ae=Object(v.a)((function(e){return{root:{display:"flex"},title:{flexGrow:1},container:{paddingLeft:12,paddingRight:12,paddingTop:32},paper:{"&:focus":{outline:0},padding:10},gridPaper:{width:"75vmin",height:"75vmin",float:"left"},scroll:{overflow:"scroll",maxHeight:"calc(100vh - 180px)"}}})),ce=null,oe=Object(n.memo)((function(e){var t=e.currentWord,r=e.onClick,c=Object(n.useState)(ce||[]),o=Object(u.a)(c,2),i=o[0],l=o[1],s=Object(n.useState)([]),d=Object(u.a)(s,2),m=d[0],f=d[1];Object(n.useEffect)((function(){fetch("".concat("/xwordmaker","/wordlist/wordlist.txt")).then((function(e){return e.text()})).then((function(e){return e.split("\n").filter((function(e){return!e.startsWith("#")}))})).then((function(e){return function(e){ce=e,l(e)}(e)}))}),[]),Object(n.useEffect)((function(){var e=new RegExp("^"+t.word+"$","i");f(i.filter((function(t){return t.match(e)})))}),[i,t.word]);return a.a.createElement("div",null,"Words: ",m.length>100?"showing ".concat(100,"/"):"",m.length,a.a.createElement(K.a,{dense:!0},m.slice(0,100).map((function(e){return a.a.createElement(V.a,{button:!0,onClick:function(){return r(e)},key:e},e)}))))}));function ie(e){var t=e.children,r=e.value,n=e.index;Object(l.a)(e,["children","value","index"]);return r!==n?a.a.createElement("div",null):a.a.createElement("div",null,t)}function le(e,t){for(var r=e.size,n=r.rows,a=r.cols,c={gridnums:e.grid.map((function(e){return 0})),answers:{down:[],across:[]},clues:{down:[],across:[]}},o=1,i=0;i<n;++i)for(var l=0;l<a;++l)if(!w(A(e,i,l))){var u=(0===i||w(A(e,i-1,l)))&&!(i===n||w(A(e,i+1,l))),s=(0===l||w(A(e,i,l-1)))&&!(l===a||w(A(e,i,l+1)));if((s||u)&&(c.gridnums[P(e,i,l)]=o++),s){for(var d="",m=l;!w(A(e,i,m))&&m<a;){var f=A(e,i,m);d+=f||"_",m++}c.answers.across.push(d);var h=t[d]||"";c.clues.across.push("".concat(o-1,". ").concat(h))}if(u){for(var g="",p=i;!w(A(e,p,l))&&p<n;){var v=A(e,p,l);g+=v||"_",p++}c.answers.down.push(g);var b=t[g]||"";c.clues.down.push("".concat(o-1,". ").concat(b))}}return c}var ue=function(e){var t={title:"TODO: NY Times, Thu, Sep 11, 2008",author:"TODO: Caleb Madison",editor:"TODO: Will Shortz",copyright:"TODO: 2008, The New York Times",publisher:"TODO: The New York Times",date:"TODO: 9/11/2008",size:e,clues:{across:[],down:[]}};return Object.assign(t,{grid:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return""})),gridnums:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0})),circles:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0}))})};function se(e){var t={};if(e.answers){var r=function(r){e.answers[r].filter((function(e){return!e.match("_")})).reduce((function(t,n,a){var c=(e.clues[r][a]||"").replace(/^ *[0-9]*\. */,"");return t[n]=c,t}),t)};r("down"),r("across")}return t}var de=function(){var e=JSON.parse(localStorage.getItem("grid"))||ue({rows:15,cols:15});return{grid:e,wordToClue:se(e)}}(),me={word:"",direction:m,coordinates:[]};var fe=function(){var e=ae(),t=Object(J.a)(),r=Object(n.useState)(!1),c=Object(u.a)(r,2),o=c[0],l=c[1],g=Object(n.useState)(0),v=Object(u.a)(g,2),b=v[0],O=v[1],E=Object(n.useState)({selected:null,currentWord:me}),y=Object(u.a)(E,2),k=y[0],j=y[1],S=Object(n.useState)(de),z=Object(u.a)(S,2),W=z[0],T=z[1],N=W.wordToClue,D=W.grid,R=Object(n.useState)(!1),K=Object(u.a)(R,2),V=K[0],Q=K[1],ee=k.selected,re=k.currentWord,ce=function(e,t){t=t||{},T((function(r){var n=ne({},r,{},t,{grid:e});return n.grid=ne({},n.grid,{},le(n.grid,n.wordToClue)),n}))},fe=Object(n.useCallback)((function(e){j((function(t){return ne({},t,{currentWord:ne({},t.currentWord,{},e)})}))}),[]);Object(n.useEffect)((function(){localStorage.setItem("grid",JSON.stringify(D))}),[D,N]),Object(n.useEffect)((function(){var e=function(e){var t=e.direction,r=e.grid,n=e.selected;if(!n)return null;for(var a=function(e){return h(t)?A(r,n.row,e):A(r,e,n.column)},c=function(e){return h(t)?e<r.size.cols:e<r.size.rows},o=h(t)?n.column:n.row,i=o;o>0&&!w(a(o));)o--;for(;c(i)&&!w(a(i));)i++;w(a(o))&&o++;for(var l,u="",s=[],d=o;d<i;++d){var m=a(d);""===m&&(m="."),u+=m,s.push((l=d,h(t)?[n.row,l]:[l,n.column]))}return{word:u,coordinates:s}}({selected:ee,direction:re.direction,grid:D});e&&fe(e)}),[fe,ee,D,re.direction]);var he=function(e){var t=k.currentWord;e&&ee&&e.row===ee.row&&e.column===ee.column&&(t=ne({},t,{direction:re.direction===m?f:m})),j(ne({},k,{selected:e,currentWord:t}))},ge=Object(n.useCallback)((function(e,t){for(var r={},n=0;n<D.gridnums.length;++n)if(D.gridnums[n]==t){var a=Math.floor(n/D.size.cols),c=Math.floor(n%D.size.cols);r={row:a,column:c};break}j((function(t){return ne({},t,{currentWord:ne({},me,{direction:e}),selected:r})}))}),[D]),we=Object(n.useCallback)((function(e,t,r){!function(e,t){T((function(r){var n=ne({},r,{wordToClue:ne({},r.wordToClue,Object(i.a)({},e,t))});return n.grid=ne({},n.grid,{},le(n.grid,n.wordToClue)),n}))}(t,r)}),[]),pe=function(e){return function(t){Q(e)}},ve=Object(n.useCallback)((function(e){re.coordinates.forEach((function(t,r){D.grid[P(D,t[0],t[1])]=e[r]})),ce(D)}),[D,re]),be=Object(d.a)(e.paper,e.gridPaper),Oe=Object(d.a)(e.paper,e.scroll),Ee={selected:ee,setSelected:he,setCurrentWord:fe,currentWord:re,grid:D,updateGrid:ce,hasFocus:V};Object(n.useEffect)((function(){window.matchMedia("print").addListener((function(e){return l(e.matches)})),window.onbeforeprint=function(){return l(!0)},window.onafterprint=function(){return l(!1)}}),[]);var ye=Object(_.a)(t.breakpoints.up("lg"));if(o)return a.a.createElement(B,{grid:D});var ke=[{label:"Word List",children:a.a.createElement(Y.a,{className:Oe},a.a.createElement(oe,{onClick:ve,currentWord:re}))},{label:"Clues",children:a.a.createElement(Y.a,{className:Oe},a.a.createElement(G,{grid:D,onClueFocus:ge,onClueChanged:we}))}],je=null,Ce=a.a.createElement(Y.a,{className:be,onFocus:pe(!0),onBlur:pe(!1),tabindex:"0"},a.a.createElement(p,{grid:D,selected:k.selected,currentWord:k.currentWord,onClick:he}));ye?je=Ce:ke=[{label:"Grid",children:Ce}].concat(Object(s.a)(ke));var Se=a.a.createElement(a.a.Fragment,null,a.a.createElement(U.a,{value:b,onChange:function(e,t){return O(t)}},ke.map((function(e){return a.a.createElement(H.a,{key:e.label,label:e.label})}))),ke.map((function(e,t){return a.a.createElement(ie,{key:e.label,value:b,index:t},e.children)})));return a.a.createElement("div",{className:"App"},a.a.createElement(X.a,{position:"static"},a.a.createElement(q.a,null,a.a.createElement(M.a,{variant:"h6",className:e.title},"XWordMaker"),a.a.createElement(C.a,{"aria-label":"Save puzzle",color:"inherit",startIcon:a.a.createElement(Z.a,null),onClick:function(){var e=new Blob([JSON.stringify(D)],{type:"text/plain;charset=utf-8"});Object(I.saveAs)(e,"puzzle.json")}},"Save Puzzle"),a.a.createElement(C.a,{"aria-label":"Load puzzle",color:"inherit",component:"label",startIcon:a.a.createElement(te.a,null)},"Load Puzzle",a.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){var t=e.target,r=new FileReader;r.onload=function(){var e=r.result,t=JSON.parse(e);ce(t,{wordToClue:se(t)})},r.readAsText(t.files[0])}})),a.a.createElement(x,{onSave:function(e){ce(ue(e)),he()}}))),a.a.createElement(F,Ee),a.a.createElement($.a,{className:e.container},a.a.createElement(L.a,{container:!0,spacing:2},ye&&a.a.createElement(L.a,{item:!0,lg:6},je),a.a.createElement(L.a,{item:!0,lg:6},Se))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[67,1,2]]]);
//# sourceMappingURL=main.86bf83e0.chunk.js.map