(this["webpackJsonpcrossword-maker"]=this["webpackJsonpcrossword-maker"]||[]).push([[0],{66:function(e,t,r){e.exports=r(81)},71:function(e,t,r){},72:function(e,t,r){e.exports=r.p+"static/media/logo.25bf045c.svg"},73:function(e,t,r){},74:function(e,t,r){},81:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(9),o=r.n(c),i=(r(71),r(6)),l=r(2),s=r(16),u=r(12),d=r(3),m=(r(72),r(73),r(74),"ACROSS"),f="DOWN",h=function(e){return e===m},p=".",w=function(e){return e===p};function g(e){var t=e.grid,r=e.selected,n=e.currentWord,c=e.onClick,o=t.size,i=o.rows,l=o.cols,s=Object(u.a)(Array(i*l).keys()).map((function(e){var o=Math.floor(e/l),i=Math.floor(e%l),s=t.grid[e],u=r&&r.row===o&&r.column===i,d=["Grid-item"];w(s)&&d.push("Grid-item-blocked"),u?d.push("Grid-item-selected"):n.coordinates.some((function(e){return e[0]===o&&e[1]===i}))&&d.push("Grid-item-highlight");var m=d.join(" "),f={fontSize:"".concat(1/s.length*1.1,"em")};return a.a.createElement("div",{key:e,className:m,onClick:function(){return c({row:o,column:i})}},a.a.createElement("span",{className:"Grid-number"},t.gridnums[e]>0?t.gridnums[e]:""),a.a.createElement("span",{style:f},s))}));return a.a.createElement("div",{style:{gridTemplateColumns:"repeat(".concat(l,", 1fr)"),gridTemplateRows:"repeat(".concat(i,", 1fr)")},className:"Grid-container"},s)}var v=r(118),b=r(133),O=r(136),E=r(126),y=r(123),k=r(124),j=r(122),C=r(120),z=r(44),S=r.n(z),W=Object(v.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function x(e){var t=e.onSave,r=W(),n=a.a.useState(!1),c=Object(s.a)(n,2),o=c[0],l=c[1],u=a.a.useState({rows:15,cols:15}),d=Object(s.a)(u,2),m=d[0],f=d[1],h=function(e){return function(){l(!1),e&&t(m)}},p=function(e){return function(t){f(Object.assign({},m,Object(i.a)({},e,+t.target.value||"")))}};return a.a.createElement("div",null,a.a.createElement(C.a,{"aria-label":"New puzzle",color:"inherit",startIcon:a.a.createElement(S.a,null),onClick:function(){l(!0)}},"New Puzzle"),a.a.createElement(O.a,{open:o,onClose:h(!1)},a.a.createElement(j.a,null,"Create New Puzzle"),a.a.createElement(y.a,null,a.a.createElement(k.a,null,"Create a new puzzle. Warning! This will destroy the current puzzle. Make sure to save first!"),a.a.createElement(b.a,{label:"Rows",value:m.rows,onChange:p("rows"),className:r.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}}),a.a.createElement(b.a,{label:"Columns",value:m.cols,onChange:p("cols"),className:r.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}})),a.a.createElement(E.a,null,a.a.createElement(C.a,{onClick:h(!1),color:"primary"},"Cancel"),a.a.createElement(C.a,{onClick:h(!0),color:"primary"},"Create"))))}var N=r(37),T=r(20),P=function(e,t,r){return e.size.cols*t+r},F=function(e,t,r){return e.grid[P(e,t,r)]},D=function(){function e(t){var r=t.selected,n=t.width,a=t.height,c=t.currentWord,o=t.setSelected;Object(N.a)(this,e),this.selected=r,this.width=n,this.height=a,this.setSelected=o,this.currentWord=c}return Object(T.a)(e,[{key:"right",value:function(){this.setSelected({row:this.selected.row,column:Math.min(this.width-1,this.selected.column+1)})}},{key:"left",value:function(){this.setSelected({row:this.selected.row,column:Math.max(0,this.selected.column-1)})}},{key:"up",value:function(){this.setSelected({row:Math.max(0,this.selected.row-1),column:this.selected.column})}},{key:"down",value:function(){this.setSelected({row:Math.min(this.height-1,this.selected.row+1),column:this.selected.column})}},{key:"moveForward",value:function(){h(this.currentWord.direction)?this.right():this.down()}},{key:"moveBack",value:function(){h(this.currentWord.direction)?this.left():this.up()}}]),e}();function A(e){var t=e.selected,r=e.setSelected,c=e.setCurrentWord,o=e.currentWord,i=e.grid,l=e.updateGrid,s=e.hasFocus,u=i.size,d=u.rows,h=u.cols,g=function(e){if(s&&t){var n=new D({width:h,height:d,setSelected:r,currentWord:o,selected:t});if("Backspace"===e.key){var a=F(i,t.row,t.column);w(a)&&(i.grid[P(i,d-t.row-1,h-t.column-1)]=""),i.grid[P(i,t.row,t.column)]="",n.moveBack(),l(i.grid)}else if(e.key.match(/^[a-z0-9]$/i)){var u=e.key.toUpperCase();e.ctrlKey?i.grid[P(i,t.row,t.column)]+=u:(i.grid[P(i,t.row,t.column)]=u,n.moveForward()),l(i.grid)}else e.key===p?(i.grid[P(i,t.row,t.column)]=e.key,i.grid[P(i,d-t.row-1,h-t.column-1)]=e.key,n.moveForward(),l(i.grid)):" "===e.key?c(Object.assign({},o,{direction:o.direction===m?f:m})):"ArrowRight"==e.key?n.right():"ArrowLeft"==e.key?n.left():"ArrowUp"==e.key?n.up():"ArrowDown"==e.key&&n.down()}};return Object(n.useEffect)((function(){return document.addEventListener("keydown",g),function(){document.removeEventListener("keydown",g)}})),a.a.createElement(a.a.Fragment,null)}var M=r(127),L=r(56);var G=Object(n.memo)((function(e){var t=e.grid,r=e.onClueFocus,n=e.onClueChanged,c=function(e,t){return function(n){r(e,t)}},o=function(e,t){return function(r){n(e,t,r.target.value)}},i=function(e){var r=e.toLowerCase();return t.clues[r].map((function(n,i){var l,s=t.answers[r][i],u=+n.match(/^ *[0-9]+/)[0].trim(),d=(l=n.replace(/^ *[0-9]*\. */,""),(new DOMParser).parseFromString(l,"text/html").documentElement.textContent),m=s.match("_"),f=!m&&!d.length;return a.a.createElement(b.a,{key:"".concat(u,"-").concat(s),label:"".concat(u,": ").concat(s),defaultValue:d,type:"text",margin:"dense",variant:"outlined",fullWidth:!0,onFocus:c(e,u),onBlur:o(e,s),disabled:m,error:f})}))},l=i(m),s=i(f);return a.a.createElement("div",null,a.a.createElement(M.a,{container:!0,spacing:1},a.a.createElement(M.a,{item:!0,xs:!0},a.a.createElement(L.a,null,"Across"),l),a.a.createElement(M.a,{item:!0,xs:!0},a.a.createElement(L.a,null,"Down"),s)))})),B=r(53),I=r(82),R=r(131),J=r(134),Y=r(132),$=r(125),_=r(128),U=r(129),H=r(130),K=r(54),V=r.n(K),X=r(55),q=r.n(X);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=Object(v.a)((function(e){return{root:{display:"flex"},title:{flexGrow:1},container:{paddingLeft:12,paddingRight:12,paddingTop:32},paper:{"&:focus":{outline:0},padding:10},gridPaper:{width:"75vmin",height:"75vmin",float:"left"},scroll:{overflow:"scroll",maxHeight:"calc(100vh - 180px)"}}})),te=Object(n.memo)((function(e){var t=e.currentWord,r=e.onClick,c=Object(n.useState)([]),o=Object(s.a)(c,2),i=o[0],l=o[1],u=Object(n.useState)([]),d=Object(s.a)(u,2),m=d[0],f=d[1];Object(n.useEffect)((function(){fetch("".concat("/xwordmaker","/wordlist/wordlist.txt")).then((function(e){return e.text()})).then((function(e){return e.split("\n").filter((function(e){return!e.startsWith("#")}))})).then((function(e){return l(e)}))}),[]),Object(n.useEffect)((function(){var e=new RegExp("^"+t.word+"$","i");f(i.filter((function(t){return t.match(e)})))}),[t.word]);return a.a.createElement("div",null,"Words: ",m.length>100?"showing ".concat(100,"/"):"",m.length,a.a.createElement($.a,{dense:!0},m.slice(0,100).map((function(e){return a.a.createElement(_.a,{button:!0,onClick:function(){return r(e)},key:e},e)}))))}));function re(e){var t=e.children,r=e.value,n=e.index,c=(Object(l.a)(e,["children","value","index"]),{});return r!==n&&(c.display="none"),a.a.createElement("div",{style:c},t)}var ne=function(e){var t={title:"TODO: NY Times, Thu, Sep 11, 2008",author:"TODO: Caleb Madison",editor:"TODO: Will Shortz",copyright:"TODO: 2008, The New York Times",publisher:"TODO: The New York Times",date:"TODO: 9/11/2008",size:e,clues:{across:[],down:[]}};return Object.assign(t,{grid:Object(u.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return""})),gridnums:Object(u.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0})),circles:Object(u.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0}))})};function ae(e){var t={};return e.answers&&(e.answers.down.reduce((function(t,r,n){var a=(e.clues.down[n]||"").replace(/^ *[0-9]*\. */,"");return t[r]=a,t}),t),e.answers.across.reduce((function(t,r,n){return t[r]=(e.clues.across[n]||"").replace(/^ *[0-9]*\. */,""),t}),t)),t}var ce=function(){var e=JSON.parse(localStorage.getItem("grid"))||ne({rows:15,cols:15});return{grid:e,wordToClue:ae(e)}}();var oe=function(){var e=ee(),t=Object(n.useState)(0),r=Object(s.a)(t,2),c=r[0],o=r[1],l=Object(n.useState)({selected:null,currentWord:{word:"",direction:m,coordinates:[]}}),p=Object(s.a)(l,2),v=p[0],b=p[1],O=Object(n.useState)(ce),E=Object(s.a)(O,2),y=E[0],k=E[1],j=y.wordToClue,z=y.grid,S=Object(n.useState)(!1),W=Object(s.a)(S,2),N=W[0],T=W[1],D=v.selected,$=v.currentWord,_=function(e,t){t=t||{},k((function(r){return Z({},r,{},t,{grid:e})}))},K=function(e){b(Z({},v,{currentWord:e}))},X=function(e,t){localStorage.setItem("grid",JSON.stringify(e)),_(e,t)},Q=function(e){X(Object.assign({},z,{grid:Object(u.a)(e)}))};Object(n.useEffect)((function(){X(Object.assign({},z,function(e,t){for(var r=e.size,n=r.rows,a=r.cols,c={gridnums:e.grid.map((function(e){return 0})),answers:{down:[],across:[]},clues:{down:[],across:[]}},o=1,i=0;i<n;++i)for(var l=0;l<a;++l)if(!w(F(e,i,l))){var s=(0===i||w(F(e,i-1,l)))&&(i!==n||w(F(e,i+1,l))),u=(0===l||w(F(e,i,l-1)))&&(l!==a||w(F(e,i,l+1)));if((u||s)&&(c.gridnums[P(e,i,l)]=o++),u){for(var d="",m=l;!w(F(e,i,m))&&m<a;){var f=F(e,i,m);d+=f||"_",m++}c.answers.across.push(d);var h=t[d]||"";c.clues.across.push("".concat(o-1,". ").concat(h))}if(s){for(var p="",g=i;!w(F(e,g,l))&&g<n;){var v=F(e,g,l);p+=v||"_",g++}c.answers.down.push(p);var b=t[p]||"";c.clues.down.push("".concat(o-1,". ").concat(b))}}return c}(z,j)))}),[z.grid,j]),Object(n.useEffect)((function(){K(function(e){var t=e.currentWord,r=e.grid,n=e.selected;if(!n)return t;for(var a=function(e){return h(t.direction)?F(r,n.row,e):F(r,e,n.column)},c=function(e){return h(t.direction)?e<r.size.cols:e<r.size.rows},o=h(t.direction)?n.column:n.row,i=o;o>0&&!w(a(o));)o--;for(;c(i)&&!w(a(i));)i++;w(a(o))&&o++;for(var l,s="",u=[],d=o;d<i;++d){var m=a(d);""===m&&(m="."),s+=m,u.push((l=d,h(t.direction)?[n.row,l]:[l,n.column]))}return Object.assign({},t,{word:s,coordinates:u})}({selected:D,currentWord:$,grid:z}))}),[D,$.direction]);var oe=function(e){var t=v.currentWord;e&&D&&e.row===D.row&&e.column===D.column&&(t=Z({},t,{direction:$.direction===m?f:m})),b(Z({},v,{selected:e,currentWord:t}))},ie=Object(n.useCallback)((function(e,t){for(var r=Z({},$,{direction:e}),n={},a=0;a<z.gridnums.length;++a)if(z.gridnums[a]==t){var c=Math.floor(a/z.size.cols),o=Math.floor(a%z.size.cols);n={row:c,column:o};break}b((function(e){return Z({},e,{selected:n,currentWord:r})}))}),[z]),le=Object(n.useCallback)((function(e,t,r){!function(e,t){k((function(r){return Z({},r,{wordToClue:Z({},r.wordToClue,Object(i.a)({},e,t))})}))}(t,r)}),[]),se=function(e){return function(t){T(e)}},ue=Object(n.useCallback)((function(e){$.coordinates.forEach((function(t,r){z.grid[P(z,t[0],t[1])]=e[r]})),Q(z.grid)}),[z,$]),de=Object(d.a)(e.paper,e.gridPaper),me=Object(d.a)(e.paper,e.scroll),fe={selected:D,setSelected:oe,setCurrentWord:K,currentWord:$,grid:z,updateGrid:Q,hasFocus:N};return a.a.createElement("div",{className:"App"},a.a.createElement(U.a,{position:"static"},a.a.createElement(H.a,null,a.a.createElement(L.a,{variant:"h6",className:e.title},"XWordMaker"),a.a.createElement(C.a,{"aria-label":"Save puzzle",color:"inherit",startIcon:a.a.createElement(V.a,null),onClick:function(){var e=new Blob([JSON.stringify(z)],{type:"text/plain;charset=utf-8"});Object(B.saveAs)(e,"puzzle.json")}},"Save Puzzle"),a.a.createElement(C.a,{"aria-label":"Load puzzle",color:"inherit",component:"label",startIcon:a.a.createElement(q.a,null)},"Load Puzzle",a.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){var t=e.target,r=new FileReader;r.onload=function(){var e=r.result,t=JSON.parse(e);X(t,{wordToClue:ae(t)})},r.readAsText(t.files[0])}})),a.a.createElement(x,{onSave:function(e){_(ne(e)),oe()}}))),a.a.createElement(A,fe),a.a.createElement(R.a,{className:e.container},a.a.createElement(M.a,{container:!0,spacing:2},a.a.createElement(M.a,{item:!0,xs:!0},a.a.createElement(I.a,{className:de,onFocus:se(!0),onBlur:se(!1),tabindex:"0"},a.a.createElement(g,{grid:z,selected:v.selected,currentWord:v.currentWord,onClick:oe}))),a.a.createElement(M.a,{item:!0,xs:6},a.a.createElement(J.a,{value:c,onChange:function(e,t){return o(t)}},a.a.createElement(Y.a,{label:"Word List"}),a.a.createElement(Y.a,{label:"Clues"})),a.a.createElement(re,{value:c,index:0},a.a.createElement(I.a,{className:me},a.a.createElement(te,{onClick:ue,currentWord:$}))),a.a.createElement(re,{value:c,index:1},a.a.createElement(I.a,{className:me},a.a.createElement(G,{grid:z,onClueFocus:ie,onClueChanged:le})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[66,1,2]]]);
//# sourceMappingURL=main.f6904b95.chunk.js.map