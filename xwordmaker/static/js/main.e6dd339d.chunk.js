(this["webpackJsonpcrossword-maker"]=this["webpackJsonpcrossword-maker"]||[]).push([[0],{66:function(e,t,r){e.exports=r(80)},71:function(e,t,r){},72:function(e,t,r){},73:function(e,t,r){},80:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(9),c=r.n(o),i=(r(71),r(6)),l=r(2),u=r(16),s=r(13),d=r(3),m=(r(72),r(73),"ACROSS"),f="DOWN",h=function(e){return e===m},w=".",p=function(e){return e===w};function g(e){var t=e.grid,r=e.selected,n=e.currentWord,o=e.onClick,c=t.size,i=c.rows,l=c.cols,u=Object(s.a)(Array(i*l).keys()).map((function(e){var c=Math.floor(e/l),i=Math.floor(e%l),u=t.grid[e],s=r&&r.row===c&&r.column===i,d=["Grid-item"];p(u)&&d.push("Grid-item-blocked"),s?d.push("Grid-item-selected"):n.coordinates.some((function(e){return e[0]===c&&e[1]===i}))&&d.push("Grid-item-highlight");var m=d.join(" "),f={fontSize:"".concat(1/u.length*1.1,"em")};return a.a.createElement("div",{key:e,className:m,onClick:function(){return o({row:c,column:i})}},a.a.createElement("span",{className:"Grid-number"},t.gridnums[e]>0?t.gridnums[e]:""),a.a.createElement("span",{style:f},u))}));return a.a.createElement("div",{style:{gridTemplateColumns:"repeat(".concat(l,", 1fr)"),gridTemplateRows:"repeat(".concat(i,", 1fr)")},className:"Grid-container"},u)}var v=r(117),b=r(132),O=r(135),E=r(125),k=r(122),y=r(123),j=r(121),C=r(119),z=r(52),S=r.n(z),W=Object(v.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function x(e){var t=e.onSave,r=W(),n=a.a.useState(!1),o=Object(u.a)(n,2),c=o[0],l=o[1],s=a.a.useState({rows:15,cols:15}),d=Object(u.a)(s,2),m=d[0],f=d[1],h=function(e){return function(){l(!1),e&&t(m)}},w=function(e){return function(t){f(Object.assign({},m,Object(i.a)({},e,+t.target.value||"")))}};return a.a.createElement("div",null,a.a.createElement(C.a,{"aria-label":"New puzzle",color:"inherit",startIcon:a.a.createElement(S.a,null),onClick:function(){l(!0)}},"New Puzzle"),a.a.createElement(O.a,{open:c,onClose:h(!1)},a.a.createElement(j.a,null,"Create New Puzzle"),a.a.createElement(k.a,null,a.a.createElement(y.a,null,"Create a new puzzle. Warning! This will destroy the current puzzle. Make sure to save first!"),a.a.createElement(b.a,{label:"Rows",value:m.rows,onChange:w("rows"),className:r.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}}),a.a.createElement(b.a,{label:"Columns",value:m.cols,onChange:w("cols"),className:r.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}})),a.a.createElement(E.a,null,a.a.createElement(C.a,{onClick:h(!1),color:"primary"},"Cancel"),a.a.createElement(C.a,{onClick:h(!0),color:"primary"},"Create"))))}var T=r(37),N=r(20),P=function(e,t,r){return e.size.cols*t+r},D=function(e,t,r){return e.grid[P(e,t,r)]},F=function(){function e(t){var r=t.selected,n=t.width,a=t.height,o=t.currentWord,c=t.setSelected;Object(T.a)(this,e),this.selected=r,this.width=n,this.height=a,this.setSelected=c,this.currentWord=o}return Object(N.a)(e,[{key:"right",value:function(){this.setSelected({row:this.selected.row,column:Math.min(this.width-1,this.selected.column+1)})}},{key:"left",value:function(){this.setSelected({row:this.selected.row,column:Math.max(0,this.selected.column-1)})}},{key:"up",value:function(){this.setSelected({row:Math.max(0,this.selected.row-1),column:this.selected.column})}},{key:"down",value:function(){this.setSelected({row:Math.min(this.height-1,this.selected.row+1),column:this.selected.column})}},{key:"moveForward",value:function(){h(this.currentWord.direction)?this.right():this.down()}},{key:"moveBack",value:function(){h(this.currentWord.direction)?this.left():this.up()}}]),e}();function A(e){var t=e.selected,r=e.setSelected,o=e.setCurrentWord,c=e.currentWord,i=e.grid,l=e.updateGrid,u=e.hasFocus,s=i.size,d=s.rows,h=s.cols,g=function(e){if(u&&t){var n=new F({width:h,height:d,setSelected:r,currentWord:c,selected:t});if("Backspace"===e.key){var a=D(i,t.row,t.column);p(a)&&(i.grid[P(i,d-t.row-1,h-t.column-1)]=""),i.grid[P(i,t.row,t.column)]="",n.moveBack(),l(i)}else if(e.key.match(/^[a-z0-9]$/i)){var s=e.key.toUpperCase();e.ctrlKey?i.grid[P(i,t.row,t.column)]+=s:(i.grid[P(i,t.row,t.column)]=s,n.moveForward()),l(i)}else e.key===w?(i.grid[P(i,t.row,t.column)]=e.key,i.grid[P(i,d-t.row-1,h-t.column-1)]=e.key,n.moveForward(),l(i)):" "===e.key?o(Object.assign({},c,{direction:c.direction===m?f:m})):"ArrowRight"==e.key?n.right():"ArrowLeft"==e.key?n.left():"ArrowUp"==e.key?n.up():"ArrowDown"==e.key&&n.down()}};return Object(n.useEffect)((function(){return document.addEventListener("keydown",g),function(){document.removeEventListener("keydown",g)}})),a.a.createElement(a.a.Fragment,null)}var M=r(126),L=r(56);var G=Object(n.memo)((function(e){var t=e.grid,r=e.onClueFocus,n=e.onClueChanged,o=function(e,t){return function(n){r(e,t)}},c=function(e,t){return function(r){n(e,t,r.target.value)}},i=function(e){var r=e.toLowerCase();return t.clues[r].map((function(n,i){var l,u=t.answers[r][i],s=+n.match(/^ *[0-9]+/)[0].trim(),d=(l=n.replace(/^ *[0-9]*\. */,""),(new DOMParser).parseFromString(l,"text/html").documentElement.textContent),m=u.match("_"),f=!m&&!d.length;return a.a.createElement(b.a,{key:"".concat(s,"-").concat(u),label:"".concat(s,": ").concat(u),defaultValue:d,type:"text",margin:"dense",variant:"outlined",fullWidth:!0,onClick:o(e,s),onBlur:c(e,u),disabled:m,error:f})}))},l=i(m),u=i(f);return a.a.createElement("div",null,a.a.createElement(M.a,{container:!0,spacing:1},a.a.createElement(M.a,{item:!0,xs:!0},a.a.createElement(L.a,null,"Across"),l),a.a.createElement(M.a,{item:!0,xs:!0},a.a.createElement(L.a,null,"Down"),u)))})),B=r(53),I=r(81),R=r(130),J=r(133),_=r(131),Y=r(124),$=r(127),U=r(128),H=r(129),K=r(54),V=r.n(K),X=r(55),q=r.n(X);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=Object(v.a)((function(e){return{root:{display:"flex"},title:{flexGrow:1},container:{paddingLeft:12,paddingRight:12,paddingTop:32},paper:{"&:focus":{outline:0},padding:10},gridPaper:{width:"75vmin",height:"75vmin",float:"left"},scroll:{overflow:"scroll",maxHeight:"calc(100vh - 180px)"}}})),te=null,re=Object(n.memo)((function(e){var t=e.currentWord,r=e.onClick,o=Object(n.useState)(te||[]),c=Object(u.a)(o,2),i=c[0],l=c[1],s=Object(n.useState)([]),d=Object(u.a)(s,2),m=d[0],f=d[1];Object(n.useEffect)((function(){fetch("".concat("/xwordmaker","/wordlist/wordlist.txt")).then((function(e){return e.text()})).then((function(e){return e.split("\n").filter((function(e){return!e.startsWith("#")}))})).then((function(e){return function(e){te=e,l(e)}(e)}))}),[]),Object(n.useEffect)((function(){var e=new RegExp("^"+t.word+"$","i");f(i.filter((function(t){return t.match(e)})))}),[i,t.word]);return a.a.createElement("div",null,"Words: ",m.length>100?"showing ".concat(100,"/"):"",m.length,a.a.createElement(Y.a,{dense:!0},m.slice(0,100).map((function(e){return a.a.createElement($.a,{button:!0,onClick:function(){return r(e)},key:e},e)}))))}));function ne(e){var t=e.children,r=e.value,n=e.index;Object(l.a)(e,["children","value","index"]);return r!==n?a.a.createElement("div",null):a.a.createElement("div",null,t)}function ae(e,t){for(var r=e.size,n=r.rows,a=r.cols,o={gridnums:e.grid.map((function(e){return 0})),answers:{down:[],across:[]},clues:{down:[],across:[]}},c=1,i=0;i<n;++i)for(var l=0;l<a;++l)if(!p(D(e,i,l))){var u=(0===i||p(D(e,i-1,l)))&&!(i===n||p(D(e,i+1,l))),s=(0===l||p(D(e,i,l-1)))&&!(l===a||p(D(e,i,l+1)));if((s||u)&&(o.gridnums[P(e,i,l)]=c++),s){for(var d="",m=l;!p(D(e,i,m))&&m<a;){var f=D(e,i,m);d+=f||"_",m++}o.answers.across.push(d);var h=t[d]||"";o.clues.across.push("".concat(c-1,". ").concat(h))}if(u){for(var w="",g=i;!p(D(e,g,l))&&g<n;){var v=D(e,g,l);w+=v||"_",g++}o.answers.down.push(w);var b=t[w]||"";o.clues.down.push("".concat(c-1,". ").concat(b))}}return o}var oe=function(e){var t={title:"TODO: NY Times, Thu, Sep 11, 2008",author:"TODO: Caleb Madison",editor:"TODO: Will Shortz",copyright:"TODO: 2008, The New York Times",publisher:"TODO: The New York Times",date:"TODO: 9/11/2008",size:e,clues:{across:[],down:[]}};return Object.assign(t,{grid:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return""})),gridnums:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0})),circles:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0}))})};function ce(e){var t={};if(e.answers){var r=function(r){e.answers[r].filter((function(e){return!e.match("_")})).reduce((function(t,n,a){var o=(e.clues[r][a]||"").replace(/^ *[0-9]*\. */,"");return t[n]=o,t}),t)};r("down"),r("across")}return t}var ie=function(){var e=JSON.parse(localStorage.getItem("grid"))||oe({rows:15,cols:15});return{grid:e,wordToClue:ce(e)}}(),le={word:"",direction:m,coordinates:[]};var ue=function(){var e=ee(),t=Object(n.useState)(0),r=Object(u.a)(t,2),o=r[0],c=r[1],l=Object(n.useState)({selected:null,currentWord:le}),s=Object(u.a)(l,2),w=s[0],v=s[1],b=Object(n.useState)(ie),O=Object(u.a)(b,2),E=O[0],k=O[1],y=E.wordToClue,j=E.grid,z=Object(n.useState)(!1),S=Object(u.a)(z,2),W=S[0],T=S[1],N=w.selected,F=w.currentWord,Y=function(e,t){t=t||{},k((function(r){var n=Z({},r,{},t,{grid:e});return n.grid=Z({},n.grid,{},ae(n.grid,n.wordToClue)),n}))},$=Object(n.useCallback)((function(e){v((function(t){return Z({},t,{currentWord:Z({},t.currentWord,{},e)})}))}),[]);Object(n.useEffect)((function(){localStorage.setItem("grid",JSON.stringify(j))}),[j,y]),Object(n.useEffect)((function(){var e=function(e){var t=e.direction,r=e.grid,n=e.selected;if(!n)return null;for(var a=function(e){return h(t)?D(r,n.row,e):D(r,e,n.column)},o=function(e){return h(t)?e<r.size.cols:e<r.size.rows},c=h(t)?n.column:n.row,i=c;c>0&&!p(a(c));)c--;for(;o(i)&&!p(a(i));)i++;p(a(c))&&c++;for(var l,u="",s=[],d=c;d<i;++d){var m=a(d);""===m&&(m="."),u+=m,s.push((l=d,h(t)?[n.row,l]:[l,n.column]))}return{word:u,coordinates:s}}({selected:N,direction:F.direction,grid:j});e&&$(e)}),[$,N,j,F.direction]);var K=function(e){var t=w.currentWord;e&&N&&e.row===N.row&&e.column===N.column&&(t=Z({},t,{direction:F.direction===m?f:m})),v(Z({},w,{selected:e,currentWord:t}))},X=Object(n.useCallback)((function(e,t){for(var r={},n=0;n<j.gridnums.length;++n)if(j.gridnums[n]==t){var a=Math.floor(n/j.size.cols),o=Math.floor(n%j.size.cols);r={row:a,column:o};break}v((function(t){return Z({},t,{currentWord:Z({},le,{direction:e}),selected:r})}))}),[j]),Q=Object(n.useCallback)((function(e,t,r){!function(e,t){k((function(r){var n=Z({},r,{wordToClue:Z({},r.wordToClue,Object(i.a)({},e,t))});return n.grid=Z({},n.grid,{},ae(n.grid,n.wordToClue)),n}))}(t,r)}),[]),te=function(e){return function(t){T(e)}},ue=Object(n.useCallback)((function(e){F.coordinates.forEach((function(t,r){j.grid[P(j,t[0],t[1])]=e[r]})),Y(j)}),[j,F]),se=Object(d.a)(e.paper,e.gridPaper),de=Object(d.a)(e.paper,e.scroll),me={selected:N,setSelected:K,setCurrentWord:$,currentWord:F,grid:j,updateGrid:Y,hasFocus:W};return a.a.createElement("div",{className:"App"},a.a.createElement(U.a,{position:"static"},a.a.createElement(H.a,null,a.a.createElement(L.a,{variant:"h6",className:e.title},"XWordMaker"),a.a.createElement(C.a,{"aria-label":"Save puzzle",color:"inherit",startIcon:a.a.createElement(V.a,null),onClick:function(){var e=new Blob([JSON.stringify(j)],{type:"text/plain;charset=utf-8"});Object(B.saveAs)(e,"puzzle.json")}},"Save Puzzle"),a.a.createElement(C.a,{"aria-label":"Load puzzle",color:"inherit",component:"label",startIcon:a.a.createElement(q.a,null)},"Load Puzzle",a.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){var t=e.target,r=new FileReader;r.onload=function(){var e=r.result,t=JSON.parse(e);Y(t,{wordToClue:ce(t)})},r.readAsText(t.files[0])}})),a.a.createElement(x,{onSave:function(e){Y(oe(e)),K()}}))),a.a.createElement(A,me),a.a.createElement(R.a,{className:e.container},a.a.createElement(M.a,{container:!0,spacing:2},a.a.createElement(M.a,{item:!0,xs:!0},a.a.createElement(I.a,{className:se,onFocus:te(!0),onBlur:te(!1),tabindex:"0"},a.a.createElement(g,{grid:j,selected:w.selected,currentWord:w.currentWord,onClick:K}))),a.a.createElement(M.a,{item:!0,xs:6},a.a.createElement(J.a,{value:o,onChange:function(e,t){return c(t)}},a.a.createElement(_.a,{label:"Word List"}),a.a.createElement(_.a,{label:"Clues"})),a.a.createElement(ne,{value:o,index:0},a.a.createElement(I.a,{className:de},a.a.createElement(re,{onClick:ue,currentWord:F}))),a.a.createElement(ne,{value:o,index:1},a.a.createElement(I.a,{className:de},a.a.createElement(G,{grid:j,onClueFocus:X,onClueChanged:Q})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[66,1,2]]]);
//# sourceMappingURL=main.e6dd339d.chunk.js.map