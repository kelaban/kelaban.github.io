(this["webpackJsonpcrossword-maker"]=this["webpackJsonpcrossword-maker"]||[]).push([[0],{70:function(e,t,r){e.exports=r(84)},75:function(e,t,r){},76:function(e,t,r){},77:function(e,t,r){},84:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(9),o=r.n(c),i=(r(75),r(5)),l=r(2),u=r(14),s=r(11),d=r(3),m=(r(76),r(77),"ACROSS"),f="DOWN",h=function(e){return e===m},g=function(e){return"."===e},p="UNDO",b="REDO";function w(e){var t=e.grid,r=e.selected,n=e.currentWord,c=e.hideAnswers,o=e.onClick,i=t.size,l=i.rows,u=i.cols,d=Object(s.a)(Array(l*u).keys()).map((function(e){var i=Math.floor(e/u),l=Math.floor(e%u),s=t.grid[e],d=["Grid-item"];r&&r.row===i&&r.column===l?d.push("Grid-item-selected"):g(s)?d.push("Grid-item-blocked"):n&&n.coordinates.some((function(e){return e[0]===i&&e[1]===l}))&&d.push("Grid-item-highlight");var m=d.join(" "),f={fontSize:"".concat(1/s.length*1.1,"em")};return a.a.createElement("div",{key:e,className:m,onClick:function(){return o({row:i,column:l})}},a.a.createElement("span",{className:"Grid-number"},t.gridnums[e]>0?t.gridnums[e]:""),a.a.createElement("span",{style:f},c?" ":s))}));return a.a.createElement("div",{style:{gridTemplateColumns:"repeat(".concat(u,", 1fr)"),gridTemplateRows:"repeat(".concat(l,", 1fr)")},className:"Grid-container"},d)}var v=r(122),O=r(137),E=r(140),j=r(129),y=r(126),k=r(127),C=r(125),S=r(124),z=r(56),W=r.n(z),N=Object(v.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function T(e){var t=e.onSave,r=N(),n=a.a.useState(!1),c=Object(u.a)(n,2),o=c[0],l=c[1],s=a.a.useState({rows:15,cols:15}),d=Object(u.a)(s,2),m=d[0],f=d[1],h=function(e){return function(){l(!1),e&&t(m)}},g=function(e){return function(t){f(Object.assign({},m,Object(i.a)({},e,+t.target.value||"")))}};return a.a.createElement("div",null,a.a.createElement(S.a,{"aria-label":"New puzzle",color:"inherit",startIcon:a.a.createElement(W.a,null),onClick:function(){l(!0)}},"New Puzzle"),a.a.createElement(E.a,{open:o,onClose:h(!1)},a.a.createElement(C.a,null,"Create New Puzzle"),a.a.createElement(y.a,null,a.a.createElement(k.a,null,"Create a new puzzle. Warning! This will destroy the current puzzle. Make sure to save first!"),a.a.createElement(O.a,{label:"Rows",value:m.rows,onChange:g("rows"),className:r.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}}),a.a.createElement(O.a,{label:"Columns",value:m.cols,onChange:g("cols"),className:r.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}})),a.a.createElement(j.a,null,a.a.createElement(S.a,{onClick:h(!1),color:"primary"},"Cancel"),a.a.createElement(S.a,{onClick:h(!0),color:"primary"},"Create"))))}var x,R=r(33),D=function(e,t,r){return e.size.cols*t+r},P=function(e,t,r){return e.grid[D(e,t,r)]},L=r(46),M=r.n(L),G=r(35),A=function e(t){var r=this;Object(R.a)(this,e),this.right=function(){r.setSelected({row:r.selected.row,column:Math.min(r.width-1,r.selected.column+1)})},this.left=function(){r.setSelected({row:r.selected.row,column:Math.max(0,r.selected.column-1)})},this.up=function(){r.setSelected({row:Math.max(0,r.selected.row-1),column:r.selected.column})},this.down=function(){r.setSelected({row:Math.min(r.height-1,r.selected.row+1),column:r.selected.column})},this.moveForward=function(){h(r.currentWord.direction)?r.right():r.down()},this.moveBack=function(){h(r.currentWord.direction)?r.left():r.up()};var n=t.selected,a=t.width,c=t.height,o=t.currentWord,i=t.setSelected;this.width=a,this.height=c,this.selected=n,this.setSelected=i,this.currentWord=o},F=function e(t){var r=this;Object(R.a)(this,e),this.setRotationalSymettry=function(e){r.grid.grid[D(r.grid,r.rows-r.selected.row-1,r.cols-r.selected.column-1)]=e},this.handleBackspace=function(e){var t=r.grid,n=r.selected,a=(r.rows,r.cols,r.movement),c=r.updateGrid,o=P(t,n.row,n.column);g(o)&&r.setRotationalSymettry(""),t.grid[D(t,n.row,n.column)]="",a.moveBack(),c(t)},this.handleLetter=function(e){var t=e.key.toUpperCase(),n=r.grid,a=r.selected,c=(r.rows,r.cols,r.movement),o=r.updateGrid;if("."===e.key)n.grid[D(n,a.row,a.column)]=t,r.setRotationalSymettry(t),c.moveForward(),o(n);else if(e.ctrlKey)n.grid[D(n,a.row,a.column)]+=t,o(n);else{var i=P(n,a.row,a.column);if(i===t)return void c.moveForward();g(i)&&r.setRotationalSymettry(""),n.grid[D(n,a.row,a.column)]=t,c.moveForward(),o(n)}},this.handleSpace=function(e){var t=r.setCurrentWord,n=r.currentWord;t(Object.assign({},n,{direction:h(n.direction)?f:m}))},this.handleLeft=function(){r.movement.left()},this.handleRight=function(){r.movement.right()},this.handleUp=function(){r.movement.up()},this.handleDown=function(){r.movement.down()},this.handleUndo=function(){r.updateGrid(p)},this.handleRedo=function(){r.updateGrid(b)},this.selected=t.selected,this.setSelected=t.setSelected,this.currentWord=t.currentWord,this.setCurrentWord=t.setCurrentWord,this.grid=Object(G.cloneDeep)(t.grid),this.updateGrid=t.updateGrid,this.rows=t.grid.size.rows,this.cols=t.grid.size.cols,this.movement=new A({width:t.grid.size.cols,height:t.grid.size.rows,setSelected:t.setSelected,currentWord:t.currentWord,selected:t.selected})},I="MOVE_UP",B="MOVE_LEFT",J="MOVE_RIGHT",U="MOVE_DOWN",_="ENTER_LETTER",V="BACKSPACE",Y="SPACE",H="UNDO",K="REDO",X=(x={},Object(i.a)(x,I,"up"),Object(i.a)(x,U,"down"),Object(i.a)(x,B,"left"),Object(i.a)(x,J,"right"),Object(i.a)(x,_,"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.".split("")),Object(i.a)(x,V,["del","backspace"]),Object(i.a)(x,Y,"space"),Object(i.a)(x,H,"mod+z"),Object(i.a)(x,K,"mod+shift+z"),x),$=Object(v.a)((function(e){return{noOutline:{"&:focus":{outline:0}}}}));function q(e){var t,r=$(),c=Object(n.useState)(!1),o=Object(u.a)(c,2),l=o[0],s=o[1],d=new F(e),m=(t={},Object(i.a)(t,I,d.handleUp),Object(i.a)(t,U,d.handleDown),Object(i.a)(t,B,d.handleLeft),Object(i.a)(t,J,d.handleRight),Object(i.a)(t,_,d.handleLetter),Object(i.a)(t,V,d.handleBackspace),Object(i.a)(t,Y,d.handleSpace),Object(i.a)(t,H,d.handleUndo),Object(i.a)(t,K,d.handleRedo),t),f=function(e){return function(t){s(e)}};return Object(n.useEffect)((function(){return Object.keys(X).forEach((function(e){var t;M.a.bind(X[e],(t=m[e],function(e){return l&&t(e)}))})),function(){Object.keys(X).forEach((function(e){M.a.unbind(X[e])}))}})),a.a.createElement("div",{ref:e.forwardRef,className:r.noOutline,onFocus:f(!0),onBlur:f(!1),tabIndex:"-1"},e.children)}var Q=r(130),Z=r(60),ee=Object(v.a)((function(e){return{focused:{}}}));function te(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}function re(e){var t=e.word,r=e.clue,n=e.dir,c=e.currentWord,o=e.onClick,i=e.onBlur,l=(ee(),+r.match(/^ *[0-9]+/)[0].trim()),u=te(r.replace(/^ *[0-9]*\. */,"")),s=t.match("_"),m=!s&&!u.length,f=c.clueNum===l&&c.direction===n,h=Object(d.a)({"Mui-focused":f});return a.a.createElement(O.a,{label:"".concat(l,": ").concat(t),defaultValue:u,type:"text",margin:"dense",variant:"outlined",fullWidth:!0,onClick:o(n,l),onBlur:i(n,t),disabled:s,error:m,InputLabelProps:{className:h},InputProps:{className:h}})}var ne=Object(n.memo)((function(e){var t=e.grid,r=e.currentWord,n=e.onClueFocus,c=e.onClueChanged,o=function(e,t){return function(r){n(e,t)}},i=function(e,t){return function(r){c(e,t,r.target.value)}},l=function(e){var n=e.toLowerCase();return t.clues[n].map((function(c,l){var u=t.answers[n][l];return a.a.createElement(re,{key:"".concat(n,"-").concat(l,"-").concat(u),word:u,clue:c,dir:e,currentWord:r,onClick:o,onBlur:i})}))},u=l(m),s=l(f);return a.a.createElement("div",null,a.a.createElement(Q.a,{container:!0,spacing:1},a.a.createElement(Q.a,{item:!0,xs:!0},a.a.createElement(Z.a,null,"Across"),u),a.a.createElement(Q.a,{item:!0,xs:!0},a.a.createElement(Z.a,null,"Down"),s)))}));function ae(e){var t=e.grid,r={margin:0,listStyleType:"none"},n=function(e){var t=+e.match(/^ *[0-9]+/)[0].trim(),n=te(e.replace(/^ *[0-9]*\. */,""));return a.a.createElement("li",{style:r,key:e},a.a.createElement("b",{style:{marginRight:2}},t),n)};return a.a.createElement("div",{style:{overflow:"hidden",marginTop:40,marginRight:20,marginLeft:20,height:"calc(100vh - 40px)"}},a.a.createElement("div",{style:{float:"right",width:"50vmin",height:"50vmin"}},a.a.createElement(w,{grid:t,hideAnswers:!0})),a.a.createElement("ul",{style:{width:"calc(50vw - 40px)",columnCount:2,margin:0,padding:0}},a.a.createElement("li",{style:r},a.a.createElement("b",null,"ACROSS")),t.clues.across.map(n),a.a.createElement("li",{style:r},a.a.createElement("b",null,"DOWN")),t.clues.down.map(n)))}var ce=r(57),oe=r(15),ie=r(132),le=r(86),ue=r(136),se=r(138),de=r(133),me=r(128),fe=r(131),he=r(134),ge=r(135),pe=r(58),be=r.n(pe),we=r(59),ve=r.n(we);function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=Object(v.a)((function(e){return{root:{display:"flex"},title:{flexGrow:1},container:{paddingLeft:12,paddingRight:12,paddingTop:32},paper:{padding:10},scroll:{overflow:"scroll",maxHeight:"calc(100vh - 180px)"}}})),ye=null,ke=Object(n.memo)((function(e){var t=e.currentWord,r=e.onClick,c=Object(n.useState)(ye||[]),o=Object(u.a)(c,2),i=o[0],l=o[1],s=Object(n.useState)([]),d=Object(u.a)(s,2),m=d[0],f=d[1],h=Object(n.useCallback)(Object(G.debounce)((function(e){f(i.filter((function(t){return t.match(e)})))}),300),[i]);Object(n.useEffect)((function(){fetch("".concat("/xwordmaker","/wordlist/wordlist.txt")).then((function(e){return e.text()})).then((function(e){return e.split("\n").filter((function(e){return!e.startsWith("#")}))})).then((function(e){return function(e){ye=e,l(e)}(e)}))}),[]),Object(n.useEffect)((function(){h(new RegExp("^"+t.word+"$","i"))}),[i,t.word]);return a.a.createElement("div",null,"Words: ",m.length>100?"showing ".concat(100,"/"):"",m.length,a.a.createElement(me.a,{dense:!0},m.slice(0,100).map((function(e){return a.a.createElement(fe.a,{button:!0,onClick:function(){return r(e)},key:e},e)}))))}));function Ce(e){var t=e.children,r=e.value,n=e.index;Object(l.a)(e,["children","value","index"]);return r!==n?a.a.createElement("div",null):a.a.createElement("div",null,t)}var Se=function(e){var t={title:"TODO: NY Times, Thu, Sep 11, 2008",author:"TODO: Caleb Madison",editor:"TODO: Will Shortz",copyright:"TODO: 2008, The New York Times",publisher:"TODO: The New York Times",date:"TODO: 9/11/2008",size:e,clues:{across:[],down:[]}};return Object.assign(t,{grid:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return""})),gridnums:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0})),circles:Object(s.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0}))})};function ze(e){var t={};if(e.answers){var r=function(r){e.answers[r].filter((function(e){return!e.match("_")})).reduce((function(t,n,a){var c=(e.clues[r][a]||"").replace(/^ *[0-9]*\. */,"");return t[n]=c,t}),t)};r("down"),r("across")}return t}var We=function(){var e=JSON.parse(localStorage.getItem("grid"))||Se({rows:15,cols:15});return{grid:e,wordToClue:ze(e),history:JSON.parse(localStorage.getItem("history"))||{undo:[],redo:[]}}}(),Ne={word:"",direction:m,coordinates:[]},Te=a.a.createRef();function xe(e){var t=e.children,r=Object(n.useState)("100%"),c=Object(u.a)(r,2),o=c[0],i=c[1],l=function(){Te.current&&i(Te.current.clientWidth)};return Object(n.useEffect)((function(){return window.addEventListener("resize",l),l(),function(){window.removeEventListener("resize",l)}}),[]),a.a.createElement("div",{ref:Te,style:{width:o,height:o}},t)}var Re=25,De=a.a.createRef();var Pe=function(){var e=je(),t=Object(oe.a)(),r=Object(n.useState)(!1),c=Object(u.a)(r,2),o=c[0],l=c[1],v=Object(n.useState)(0),O=Object(u.a)(v,2),E=O[0],j=O[1],y=Object(n.useState)({selected:null,currentWord:Ne}),k=Object(u.a)(y,2),C=k[0],z=k[1],W=Object(n.useState)(We),N=Object(u.a)(W,2),x=N[0],R=N[1],L=(x.wordToClue,x.grid),M=x.history,A=C.selected,F=C.currentWord,I=function(e){R((function(t){var r=null;switch(e){case p:r=Ee({},t);var n=t.history.undo;if(!n.length)break;var a=n[n.length-1],c=n.slice(0,n.length-1);r.grid=a,r.history={undo:c,redo:[t.grid].concat(Object(s.a)(t.history.redo))};break;case b:r=Ee({},t);var o=t.history.redo;if(!o.length)break;var i=o[0],l=o.slice(1);r.grid=i,r.history={undo:[].concat(Object(s.a)(t.history.undo),[t.grid]),redo:l};break;default:(r=e(t)).grid=Ee({},r.grid,{},function(e,t){for(var r=e.size,n=r.rows,a=r.cols,c={gridnums:e.grid.map((function(e){return 0})),answers:{down:[],across:[]},clues:{down:[],across:[]}},o=1,i=0;i<n;++i)for(var l=0;l<a;++l)if(!g(P(e,i,l))){var u=(0===i||g(P(e,i-1,l)))&&!(i===n||g(P(e,i+1,l))),s=(0===l||g(P(e,i,l-1)))&&!(l===a||g(P(e,i,l+1)));if((s||u)&&(c.gridnums[D(e,i,l)]=o++),s){for(var d="",m=l;!g(P(e,i,m))&&m<a;){var f=P(e,i,m);d+=f||"_",m++}c.answers.across.push(d);var h=t[d]||"";c.clues.across.push("".concat(o-1,". ").concat(h))}if(u){for(var p="",b=i;!g(P(e,b,l))&&b<n;){var w=P(e,b,l);p+=w||"_",b++}c.answers.down.push(p);var v=t[p]||"";c.clues.down.push("".concat(o-1,". ").concat(v))}}return c}(r.grid,r.wordToClue)),r.history.undo=r.history.undo.slice(-Re),r.history.undo.push(t.grid),r.history.redo=[]}return r}))},B=function(e,t){e===p||e===b?I(e):(t=t||{},I((function(r){return Ee({},r,{},t,{grid:e})})))},J=Object(n.useCallback)((function(e){z((function(t){return Ee({},t,{currentWord:Ee({},t.currentWord,{},e)})}))}),[]);Object(n.useEffect)((function(){localStorage.setItem("grid",JSON.stringify(L)),localStorage.setItem("history",JSON.stringify(M))}),[L,M]),Object(n.useEffect)((function(){var e=function(e){var t=e.direction,r=e.grid,n=e.selected;if(!n)return null;for(var a=function(e){return h(t)?P(r,n.row,e):P(r,e,n.column)},c=function(e){return h(t)?[n.row,e]:[e,n.column]},o=function(e){return h(t)?e<r.size.cols:e<r.size.rows},i=h(t)?n.column:n.row,l=i;i>0&&!g(a(i));)i--;for(;o(l)&&!g(a(l));)l++;g(a(i))&&i++;for(var u="",s=[],d=r.gridnums[D(r,c(i)[0],c(i)[1])],m=i;m<l;++m){var f=a(m);""===f&&(f="."),u+=f,s.push(c(m))}return{word:u,coordinates:s,clueNum:d}}({selected:A,direction:F.direction,grid:L});e&&J(e)}),[J,A,L,F.direction]);var U=function(e){var t=C.currentWord;e&&A&&e.row===A.row&&e.column===A.column&&(t=Ee({},t,{direction:F.direction===m?f:m})),z(Ee({},C,{selected:e,currentWord:t}))},_=Object(n.useCallback)((function(e,t){for(var r={},n=0;n<L.gridnums.length;++n)if(L.gridnums[n]==t){var a=Math.floor(n/L.size.cols),c=Math.floor(n%L.size.cols);r={row:a,column:c};break}z((function(t){return Ee({},t,{currentWord:Ee({},Ne,{direction:e}),selected:r})}))}),[L]),V=Object(n.useCallback)((function(e,t,r){!function(e,t){I((function(r){return Ee({},r,{wordToClue:Ee({},r.wordToClue,Object(i.a)({},e,t))})}))}(t,r)}),[]),Y=Object(n.useCallback)((function(e){var t=Object(G.cloneDeep)(L);F.coordinates.forEach((function(r,n){t.grid[D(L,r[0],r[1])]=e[n]})),De.current.focus(),B(t)}),[L,F]),H=Object(d.a)(e.paper),K=Object(d.a)(e.paper,e.scroll),X={selected:A,setSelected:U,setCurrentWord:J,currentWord:F,grid:L,updateGrid:B,forwardRef:De};Object(n.useEffect)((function(){window.matchMedia("print").addListener((function(e){return l(e.matches)})),window.onbeforeprint=function(){return l(!0)},window.onafterprint=function(){return l(!1)}}),[]);var $=Object(ie.a)(t.breakpoints.up("lg"));if(o)return a.a.createElement(ae,{grid:L});var ee=[{label:"Word List",children:a.a.createElement(le.a,{className:K},a.a.createElement(ke,{onClick:Y,currentWord:F}))},{label:"Clues",children:a.a.createElement(le.a,{className:K},a.a.createElement(ne,{currentWord:F,grid:L,onClueFocus:_,onClueChanged:V}))}],te=null,re=a.a.createElement(q,X,a.a.createElement(le.a,{className:H},a.a.createElement(xe,null,a.a.createElement(w,{grid:L,selected:C.selected,currentWord:C.currentWord,onClick:U}))));$?te=re:ee=[{label:"Grid",children:re}].concat(Object(s.a)(ee));var me=a.a.createElement(a.a.Fragment,null,a.a.createElement(se.a,{value:E,onChange:function(e,t){return j(t)}},ee.map((function(e){return a.a.createElement(de.a,{key:e.label,label:e.label})}))),ee.map((function(e,t){return a.a.createElement(Ce,{key:e.label,value:E,index:t},e.children)})));return a.a.createElement("div",{className:"App"},a.a.createElement(he.a,{position:"static"},a.a.createElement(ge.a,null,a.a.createElement(Z.a,{variant:"h6",className:e.title},"XWordMaker"),a.a.createElement(S.a,{"aria-label":"Save puzzle",color:"inherit",startIcon:a.a.createElement(be.a,null),onClick:function(){var e=new Blob([JSON.stringify(L)],{type:"text/plain;charset=utf-8"});Object(ce.saveAs)(e,"puzzle.json")}},"Save Puzzle"),a.a.createElement(S.a,{"aria-label":"Load puzzle",color:"inherit",component:"label",startIcon:a.a.createElement(ve.a,null)},"Load Puzzle",a.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){var t=e.target;if(t.value){var r=new FileReader;r.onload=function(){var e=r.result,t=JSON.parse(e);B(t,{wordToClue:ze(t)})},r.readAsText(t.files[0]),t.value=""}}})),a.a.createElement(T,{onSave:function(e){B(Se(e)),U()}}))),a.a.createElement(ue.a,{className:e.container},a.a.createElement(Q.a,{container:!0,spacing:2},$&&a.a.createElement(Q.a,{item:!0,lg:6},te),a.a.createElement(Q.a,{item:!0,lg:6},me))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[70,1,2]]]);
//# sourceMappingURL=main.5284a6e6.chunk.js.map